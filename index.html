<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار التعلم الآلي - 400 سؤال</title>
      <style>
        /* جميع الأنماط الموجودة في الكود الأصلي */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #2575fc;
            --secondary-color: #6a11cb;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --light-bg: #f5f7fa;
            --dark-bg: #1a1a2e;
            --text-light: #333;
            --text-dark: #f5f7fa;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--text-light);
            line-height: 1.6;
            padding: 20px;
            overflow-x: hidden;
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--text-dark);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
            transition: background-color 0.3s;
        }
        
        body.dark-mode .container {
            background-color: var(--dark-bg);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        /* شريط الأدوات العلوي */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
        }
        
        .toolbar-buttons {
            display: flex;
            gap: 10px;
        }
        
        .toolbar-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .toolbar-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* شاشة الترحيب */
        .welcome-screen {
            padding: 40px;
            text-align: center;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }
        
        .welcome-title {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .welcome-subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .batch-info {
            font-size: 1.2rem;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
        }
        
        .welcome-buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .welcome-btn {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.9);
            color: #2575fc;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .welcome-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background: white;
        }
        
        /* إعدادات الاختبار */
        .test-settings {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        body.dark-mode .test-settings {
            background: #2d3748;
        }
        
        .settings-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .settings-options {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .setting-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* شاشة صنع الاختبار العشوائي */
        .custom-test-container {
            padding: 30px;
            text-align: center;
            display: none;
        }
        
        .custom-test-title {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .custom-test-form {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        body.dark-mode .custom-test-form {
            background: #2d3748;
        }
        
        .custom-test-input {
            padding: 15px;
            font-size: 1.2rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            width: 200px;
            text-align: center;
            margin: 0 10px 20px;
        }
        
        .custom-test-info {
            margin-top: 20px;
            color: #6c757d;
            font-size: 1rem;
        }
        
        /* قسم المحاضرات */
        .lecture-selection {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            padding: 20px;
            background-color: #f8f9fa;
            display: none;
        }
        
        body.dark-mode .lecture-selection {
            background-color: #2d3748;
        }
        
        .lecture-btn {
            padding: 15px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .lecture-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0));
            clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%);
        }
        
        .lecture-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .lecture-btn.true-false {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        }
        
        /* منطقة الامتحان */
        .exam-container {
            display: none;
            padding: 20px;
            position: relative;
        }
        
        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        body.dark-mode .exam-header {
            border-bottom: 2px solid #4a5568;
        }
        
        .lecture-title {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        /* شريط التقدم */
        .progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        body.dark-mode .progress-container {
            background-color: #4a5568;
        }
        
        .progress-bar {
            height: 10px;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
        }
        
        .progress-text {
            text-align: center;
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: #6c757d;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        body.dark-mode .progress-text {
            color: #a0aec0;
        }
        
        .progress-percentage {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .timer {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .timer.warning {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* منطقة السؤال */
        .question-container {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
        }
        
        body.dark-mode .question-container {
            background-color: #2d3748;
        }
        
        .question-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.6;
            color: #2d3748;
        }
        
        body.dark-mode .question-text {
            color: #e2e8f0;
        }
        
        .options-container {
            margin-bottom: 30px;
        }
        
        .option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        body.dark-mode .option {
            border: 2px solid #4a5568;
        }
        
        .option:hover {
            border-color: var(--primary-color);
            background-color: #f8f9fa;
            transform: translateX(5px);
        }
        
        body.dark-mode .option:hover {
            background-color: #4a5568;
        }
        
        .option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        
        body.dark-mode .option.correct {
            background-color: #2d5a2d;
            border-color: #3a6b3a;
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        
        body.dark-mode .option.incorrect {
            background-color: #5a2d2d;
            border-color: #6b3a3a;
        }
        
        .option input {
            margin-right: 15px;
        }
        
        .option-label {
            font-weight: bold;
            margin-right: 10px;
            color: var(--primary-color);
            min-width: 25px;
        }
        
        .option-feedback {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            font-weight: bold;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }
        
        .feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        body.dark-mode .feedback.correct {
            background-color: #2d5a2d;
            color: #c8e6c9;
        }
        
        .feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        body.dark-mode .feedback.incorrect {
            background-color: #5a2d2d;
            color: #ffcdd2;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .nav-btn {
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            color: white;
        }
        
        .nav-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .nav-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .return-btn {
            background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 100%);
            color: #721c24;
        }
        
        /* شاشة النتائج */
        .results-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        body.dark-mode .results-container {
            background-color: #2d3748;
        }
        
        .score {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 20px 0;
            position: relative;
            display: inline-block;
        }
        
        .score::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 50%;
            height: 4px;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            border-radius: 2px;
        }
        
        .score-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #6c757d;
        }
        
        body.dark-mode .score-text {
            color: #a0aec0;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            min-width: 120px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        body.dark-mode .stat-item {
            background: #4a5568;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        body.dark-mode .stat-label {
            color: #a0aec0;
        }
        
        /* لوحة الإنجازات */
        .achievements-panel {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }
        
        body.dark-mode .achievements-panel {
            background: #4a5568;
        }
        
        .achievements-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .achievement {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        body.dark-mode .achievement {
            background: #2d3748;
        }
        
        .achievement.unlocked {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            transform: scale(1.05);
        }
        
        body.dark-mode .achievement.unlocked {
            background: linear-gradient(135deg, #2d5a2d 0%, #3a6b3a 100%);
        }
        
        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .achievement-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .achievement-desc {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        body.dark-mode .achievement-desc {
            color: #a0aec0;
        }
        
        /* مراجعة الأسئلة */
        .review-panel {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }
        
        body.dark-mode .review-panel {
            background: #4a5568;
        }
        
        .review-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .review-questions {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .review-question {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-mode .review-question {
            background: #2d3748;
        }
        
        .review-question.correct {
            border-left: 5px solid var(--success-color);
        }
        
        .review-question.incorrect {
            border-left: 5px solid var(--danger-color);
        }
        
        .review-question-text {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .review-answer {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }
        
        .answer-label {
            font-weight: bold;
            min-width: 100px;
        }
        
        .answer-correct {
            color: var(--success-color);
        }
        
        .answer-user {
            color: var(--danger-color);
        }
        
        /* QR code */
        .qr-code-container {
            margin: 20px 0;
            text-align: center;
            display: none;
        }
        
        .qr-code {
            width: 150px;
            height: 150px;
            margin: 0 auto;
            background: white;
            padding: 10px;
            border-radius: 10px;
        }
        
        /* Leaderboard */
        .leaderboard {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }
        
        body.dark-mode .leaderboard {
            background: #4a5568;
        }
        
        .leaderboard-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .leaderboard-list {
            list-style: none;
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        body.dark-mode .leaderboard-item {
            border-bottom: 1px solid #4a5568;
        }
        
        .leaderboard-item:last-child {
            border-bottom: none;
        }
        
        .leaderboard-rank {
            font-weight: bold;
            color: var(--primary-color);
        }

        /* أنماط محسنة للاختبار العشوائي */
        .test-configuration {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .test-configuration {
            background: #2d3748;
        }

        .config-section {
            margin-bottom: 20px;
        }

        .config-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .lecture-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #e9ecef;
            border-radius: 5px;
        }

        body.dark-mode .lecture-checkboxes {
            border-color: #4a5568;
        }

        .lecture-checkboxes label {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 5px;
            cursor: pointer;
        }

        .selection-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .selection-btn {
            padding: 8px 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .selection-btn:hover {
            opacity: 0.9;
        }
                
        /* PDF Export */
        .pdf-export {
            margin: 20px 0;
            text-align: center;
            display: none;
        }
        
        /* تأثيرات بصرية */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: linear-gradient(45deg, #4facfe, #00f2fe, #fad0c4, #ff9a9e);
            opacity: 0;
            z-index: 1000;
            animation: confettiFall 3s ease-in-out forwards;
        }
        
        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        /* أنماط القائمة الجانبية للأسئلة - محسنة للشاشات الصغيرة */
        .questions-sidebar {
            position: fixed;
            right: 20px;
            top: 100px;
            width: 200px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 15px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            z-index: 10;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        body.dark-mode .questions-sidebar {
            background: #2d3748;
        }

        .questions-sidebar h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 10px;
        }

        body.dark-mode .questions-sidebar h3 {
            border-bottom: 1px solid #4a5568;
        }

        .questions-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 8px;
        }

        .question-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            border: 2px solid transparent;
        }

        body.dark-mode .question-item {
            background: #4a5568;
        }

        .question-item:hover {
            transform: scale(1.1);
            border-color: var(--primary-color);
        }

        .question-item.current {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .question-item.answered {
            background: var(--success-color);
            color: white;
        }

        .question-item.answered-incorrect {
            background: var(--danger-color);
            color: white;
        }

        .exam-content {
            margin-right: 220px;
            transition: margin-right 0.3s;
        }

        .exam-content.full-width {
            margin-right: 0;
        }

        .toggle-sidebar {
            position: fixed;
            right: 10px;
            top: 70px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 11;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* إصلاحات للشاشات الصغيرة */
        @media (max-width: 768px) {
            .questions-sidebar {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 120px;
                border-radius: 15px 15px 0 0;
                padding: 10px;
                transform: translateY(100%);
                opacity: 0;
                z-index: 100;
                box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.2);
            }
            
            .questions-sidebar.active {
                transform: translateY(0);
                opacity: 1;
            }
            
            .questions-sidebar h3 {
                display: none;
            }
            
            .questions-list {
                grid-template-columns: repeat(auto-fill, minmax(35px, 1fr));
                gap: 5px;
                max-height: 80px;
                overflow-y: auto;
            }
            
            .question-item {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .exam-content {
                margin-right: 0;
                width: 100%;
            }
            
            .toggle-sidebar {
                position: fixed;
                bottom: 20px;
                right: 20px;
                top: auto;
                width: 60px;
                height: 60px;
                border-radius: 50%;
                font-size: 1.5rem;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                z-index: 101;
            }
            
            .toggle-sidebar.active {
                background: var(--danger-color);
            }
            
            /* تحسينات إضافية للشاشات الصغيرة */
            .question-container {
                padding: 15px;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .option {
                padding: 12px;
            }
            
            .navigation {
                flex-direction: column;
                gap: 10px;
            }
            
            button {
                width: 100%;
            }
            
            .exam-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
            }
            
            .welcome-title {
                font-size: 2.5rem;
            }
            
            .welcome-subtitle {
                font-size: 1.2rem;
            }
            
            .welcome-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .welcome-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 10px;
            }
            
            .toolbar-buttons {
                width: 100%;
                justify-content: center;
            }
            
            .lecture-selection {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .container {
                border-radius: 10px;
            }
            
            .welcome-screen {
                padding: 20px;
                min-height: 300px;
            }
            
            .welcome-title {
                font-size: 2rem;
            }
            
            .welcome-subtitle {
                font-size: 1rem;
            }
            
            .batch-info {
                font-size: 1rem;
                padding: 8px 15px;
            }
            
            .welcome-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .questions-list {
                grid-template-columns: repeat(auto-fill, minmax(30px, 1fr));
            }
            
            .question-item {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
        }

        /* وسائط متجاوبة إضافية */
        @media (max-width: 768px) {
            .about-us-content {
                padding: 20px;
            }
            
            .about-us-title {
                font-size: 2rem;
            }
            
            .thanks-section h3 {
                font-size: 1.3rem;
            }
            
            .lecture-checkboxes {
                grid-template-columns: 1fr;
                max-height: 150px;
            }
            
            .selection-actions {
                flex-direction: column;
            }
        }

        /* إضافة أنماط جديدة */
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #721c24;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 0;
            animation: pulse 1s infinite;
        }
        
        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .share-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .firework {
            position: fixed;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: fireworkExplode 1s ease-out forwards;
        }
        
        @keyframes fireworkExplode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(20); opacity: 0; }
        }
        
        .stats-chart {
            width: 100%;
            height: 200px;
            margin: 20px 0;
        }
        
        .correct-answer {
            background-color: #d4edda !important;
            border-color: #c3e6cb !important;
        }
        
        .incorrect-answer {
            background-color: #f8d7da !important;
            border-color: #f5c6cb !important;
        }
        
        body.dark-mode .correct-answer {
            background-color: #2d5a2d !important;
            border-color: #3a6b3a !important;
        }
        
        body.dark-mode .incorrect-answer {
            background-color: #5a2d2d !important;
            border-color: #6b3a3a !important;
        }

        /* أنماط قسم About Us */
        .about-us-container {
            padding: 40px;
            text-align: center;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .about-us-content {
            max-width: 800px;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .about-us-title {
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .thanks-section {
            margin-bottom: 30px;
            text-align: left;
        }

        .thanks-section h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 10px;
        }

        .contributors-list, .designers-list {
            list-style: none;
            padding: 0;
        }

        .contributors-list li, .designers-list li {
            padding: 8px 0;
            font-size: 1.1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .contributors-list li:last-child, .designers-list li:last-child {
            border-bottom: none;
        }

        body.dark-mode .about-us-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        /* تعديلات لعرض الأسئلة من اليسار إلى اليمين */
        .question-text,
        .options-container,
        .option,
        .feedback,
        .review-question-text,
        .review-answer,
        .achievement-name,
        .achievement-desc,
        .stat-value,
        .stat-label,
        .leaderboard-item,
        .score,
        .score-text {
            direction: ltr;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- شريط الأدوات العلوي -->
        <div class="toolbar">
            <div class="toolbar-title">اختبار التعلم الآلي</div>
            <div class="toolbar-buttons">
                <button class="toolbar-btn" id="dark-mode-toggle">الوضع الليلي</button>
                <button class="toolbar-btn" id="reset-progress">إعادة التعيين</button>
                <button class="toolbar-btn" id="show-achievements">الإنجازات</button>
                <button class="toolbar-btn" id="about-us-btn">About Us</button>
            </div>
        </div>
        
        <!-- شاشة الترحيب -->
        <div class="welcome-screen" id="welcome-screen">
            <h1 class="welcome-title">اختبار التعلم الآلي</h1>
            <p class="welcome-subtitle">اختبار شامل يحتوي على 400 سؤال في التعلم الآلي</p>
            <div class="batch-info">تم صنع هذا العمل بواسطة دفعة IS_23</div>
            <div class="welcome-buttons">
                <button class="welcome-btn" id="start-lectures-btn">المحاضرات</button>
                <button class="welcome-btn" id="create-test-btn">صنع اختبار</button>
            </div>
        </div>
        
        <!-- إعدادات الاختبار -->
        <div class="test-settings" id="test-settings">
            <h3 class="settings-title">إعدادات الاختبار</h3>
            <div class="settings-options">
                <div class="setting-option">
                    <input type="radio" id="immediate-feedback" name="feedback-type" value="immediate" checked>
                    <label for="immediate-feedback">تصحيح فوري بعد كل سؤال</label>
                </div>
                <div class="setting-option">
                    <input type="radio" id="delayed-feedback" name="feedback-type" value="delayed">
                    <label for="delayed-feedback">تصحيح بعد انتهاء الاختبار</label>
                </div>
                <div class="setting-option">
                    <input type="checkbox" id="countdown-timer" checked>
                    <label for="countdown-timer">مؤقت تنازلي</label>
                </div>
                <div class="setting-option">
                    <label for="test-duration">مدة الاختبار (دقائق):</label>
                    <input type="number" id="test-duration" min="5" max="120" value="30">
                </div>
            </div>
        </div>
        
        <!-- واجهة صنع الاختبار العشوائي -->
        <div class="custom-test-container" id="custom-test-container">
            <h2 class="custom-test-title">Create Custom Test</h2>
            <div class="custom-test-form">
                <div class="test-configuration">
                    <div class="config-section">
                        <label for="question-count">Number of Questions:</label>
                        <input type="number" class="custom-test-input" id="question-count" min="5" max="100" value="20">
                    </div>
                    
                    <div class="config-section">
                        <label for="difficulty">Difficulty Level:</label>
                        <select id="difficulty">
                            <option value="all">All Levels</option>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    
                    <div class="config-section">
                        <h3>Select Lectures:</h3>
                        <div class="lecture-checkboxes" id="lecture-checkboxes">
                            <label><input type="checkbox" value="1" checked> Lecture 1 (1-40)</label>
                            <label><input type="checkbox" value="2" checked> Lecture 2 (41-73)</label>
                            <label><input type="checkbox" value="3" checked> Lecture 3 (74-112)</label>
                            <label><input type="checkbox" value="4" checked> Lecture 4 (113-151)</label>
                            <label><input type="checkbox" value="5" checked> Lecture 5 (152-190)</label>
                            <label><input type="checkbox" value="6" checked> Lecture 6 (191-226)</label>
                            <label><input type="checkbox" value="7" checked> Lecture 7 (227-246)</label>
                            <label><input type="checkbox" value="8" checked> Lecture 8 (247-282)</label>
                            <label><input type="checkbox" value="9" checked> Lecture 9 (283-322)</label>
                            <label><input type="checkbox" value="10" checked> Lecture 10 (323-332)</label>
                            <label><input type="checkbox" value="true-false" checked> True/False Questions (333-400)</label>
                        </div>
                        <div class="selection-actions">
                            <button class="selection-btn" id="select-all">Select All</button>
                            <button class="selection-btn" id="deselect-all">Deselect All</button>
                        </div>
                    </div>
                </div>
                
                <button class="nav-btn" id="start-custom-test">Start Custom Test</button>
                <p class="custom-test-info">Questions will be randomly selected from the chosen lectures</p>
            </div>
            <button class="return-btn" id="back-to-welcome">Back to Home</button>
        </div>
        
        <!-- قسم المحاضرات -->
        <div class="lecture-selection" id="lecture-selection">
            <button class="lecture-btn" data-lecture="1">المحاضرة 1 (1-40)</button>
            <button class="lecture-btn" data-lecture="2">المحاضرة 2 (41-73)</button>
            <button class="lecture-btn" data-lecture="3">المحاضرة 3 (74-112)</button>
            <button class="lecture-btn" data-lecture="4">المحاضرة 4 (113-151)</button>
            <button class="lecture-btn" data-lecture="5">المحاضرة 5 (152-190)</button>
            <button class="lecture-btn" data-lecture="6">المحاضرة 6 (191-226)</button>
            <button class="lecture-btn" data-lecture="7">المحاضرة 7 (227-246)</button>
            <button class="lecture-btn" data-lecture="8">المحاضرة 8 (247-282)</button>
            <button class="lecture-btn" data-lecture="9">المحاضرة 9 (283-322)</button>
            <button class="lecture-btn" data-lecture="10">المحاضرة 10 (323-332)</button>
            <button class="lecture-btn true-false" data-lecture="true-false">أسئلة صحيح/خطأ (333-400)</button>
            <button class="return-btn" id="back-to-welcome-2">العودة للصفحة الرئيسية</button>
        </div>
        
        <!-- منطقة الامتحان -->
        <div class="exam-container" id="exam-container">
            <!-- القائمة الجانبية للأسئلة -->
            <div class="questions-sidebar" id="questions-sidebar">
                <h3>أسئلة المحاضرة</h3>
                <div class="questions-list" id="questions-list">
                    <!-- سيتم تعبئة أرقام الأسئلة ديناميكياً -->
                </div>
            </div>
            
            <!-- زر إظهار/إخفاء القائمة الجانبية -->
            <button class="toggle-sidebar" id="toggle-sidebar">☰</button>
            
            <!-- محتوى الامتحان الرئيسي -->
            <div class="exam-content" id="exam-content">
                <div class="exam-header">
                    <h2 class="lecture-title" id="lecture-title">المحاضرة 1</h2>
                    <button class="return-btn" id="return-btn">العودة إلى المحاضرات</button>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="progress-text">
                    <span id="progress-text">السؤال 1 من 40</span>
                    <span class="progress-percentage" id="progress-percentage">0%</span>
                    <span class="timer" id="timer">30:00</span>
                </div>
                
                <div class="question-container">
                    <div class="question-number">السؤال <span id="current-number">1</span></div>
                    <div class="question-text" id="question-text">ما هو الهدف الرئيسي للتعلم الآلي؟</div>
                    
                    <div class="options-container" id="options-container">
                        <!-- سيتم تعبئة الخيارات ديناميكياً -->
                    </div>
                    
                    <div class="feedback" id="feedback"></div>
                    
                    <div class="navigation">
                        <button class="nav-btn" id="prev-btn" disabled>السابق</button>
                        <button class="nav-btn" id="next-btn" disabled>التالي</button>
                    </div>
                </div>
                
                <!-- شاشة النتائج -->
                <div class="results-container" id="results-container">
                    <h2>نتيجة الاختبار</h2>
                    <div class="score" id="score">0/40</div>
                    <div class="score-text" id="score-text">لقد حصلت على 0% في هذا الاختبار</div>
                    
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value" id="correct-answers">0</div>
                            <div class="stat-label">الإجابات الصحيحة</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="incorrect-answers">0</div>
                            <div class="stat-label">الإجابات الخاطئة</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="time-taken">00:00</div>
                            <div class="stat-label">الوقت المستغرق</div>
                        </div>
                    </div>
                    
                    <!-- لوحة الإنجازات -->
                    <div class="achievements-panel" id="achievements-panel">
                        <h3 class="achievements-title">الإنجازات</h3>
                        <div class="achievements-grid" id="achievements-grid">
                            <!-- سيتم تعبئة الإنجازات ديناميكياً -->
                        </div>
                    </div>
                    
                    <!-- مراجعة الأسئلة -->
                    <div class="review-panel" id="review-panel">
                        <h3 class="review-title">مراجعة الأسئلة</h3>
                        <div class="review-questions" id="review-questions">
                            <!-- سيتم تعبئة الأسئلة ديناميكياً -->
                        </div>
                        <button class="nav-btn" id="retry-incorrect">إعادة المحاولة على الأسئلة الخاطئة</button>
                    </div>
                    
                    <!-- لوحة المتصدرين -->
                    <div class="leaderboard" id="leaderboard">
                        <h3 class="leaderboard-title">لوحة المتصدرين</h3>
                        <ul class="leaderboard-list" id="leaderboard-list">
                            <!-- سيتم تعبئة المتصدرين ديناميكياً -->
                        </ul>
                    </div>
                    
                    <!-- QR Code -->
                    <div class="qr-code-container" id="qr-code-container">
                        <h3>مشاركة النتيجة عبر QR Code</h3>
                        <div class="qr-code" id="qr-code"></div>
                    </div>
                    
                    <!-- تصدير PDF -->
                    <div class="pdf-export" id="pdf-export">
                        <button class="nav-btn" id="export-pdf">تصدير النتيجة كـ PDF</button>
                    </div>
                    
                    <!-- مشاركة النتائج -->
                    <div class="share-results" id="share-results">
                        <h3 class="share-title">مشاركة النتائج</h3>
                        <div class="share-buttons">
                            <button class="share-btn" id="copy-results">نسخ النتائج</button>
                            <button class="share-btn" id="share-twitter">مشاركة على تويتر</button>
                            <button class="share-btn" id="share-whatsapp">مشاركة على واتساب</button>
                        </div>
                    </div>
                    
                    <button class="return-btn" id="back-to-lectures">العودة إلى قائمة المحاضرات</button>
                </div>
            </div>
        </div>

        <!-- قسم About Us -->
        <div class="about-us-container" id="about-us-container" style="display: none;">
            <div class="about-us-content">
                <h2 class="about-us-title">About Us</h2>
                
                <div class="thanks-section">
                    <h3>Special Thanks to Our Question Contributors:</h3>
                    <ul class="contributors-list">
                        <li>Abdullah Jaber</li>
                        <li>Ahmed Al-Wasabi</li>
                        <li>Ismail Al-Khumari</li>
                        <li>Ahmed Al-Aini</li>
                        <li>Mohammed Rajih</li>
                        <li>Mohammed Taj</li>
                        <li>Ibrahim Salah</li>
                        <li>Mahmoud Al-Raidi</li>
                        <li>Yousif Al-Siyaghi</li>
                        <li>Bassem Mansour</li>
                        <li>Asalah Al-Arjazi</li>
                        <li>Malak Al-Arasi</li>
                    </ul>
                </div>
                
                <div class="thanks-section">
                    <h3>Special Thanks to Our Designers and Scientific Committee:</h3>
                    <ul class="designers-list">
                        <li>Abdullah Jaber</li>
                        <li>Ahmed Al-Wasabi</li>
                        <li>Asalah Al-Arjazi</li>
                        <li>Malak Al-Arasi</li>
                    </ul>
                </div>
                
                <button class="return-btn" id="back-from-about">Back to Home</button>
            </div>
        </div>
    </div>

    <script>
        // بيانات الأسئلة الكاملة (نفس البيانات السابقة)
        const questionsData = {
            "1": [
                {
                    question: "What is the primary goal of machine learning?",
                    options: [
                        "To write code for mobile apps",
                        "To enable systems to learn from data and make predictions",
                        "To design user interfaces",
                        "To store data in databases"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is a supervised learning task?",
                    options: [
                        "Clustering",
                        "Dimensionality reduction",
                        "Image classification with labeled images",
                        "Principal component analysis"
                    ],
                    answer: "C"
                },
                {
                    question: "In ML terminology, what is a \"feature\"?",
                    options: [
                        "The output label",
                        "A configurable software setting",
                        "An input variable used to make predictions",
                        "A model's training algorithm"
                    ],
                    answer: "C"
                },
                {
                    question: "What is a \"label\" in supervised learning?",
                    options: [
                        "A feature's scale",
                        "The target value to predict",
                        "A preprocessing step",
                        "A model hyperparameter"
                    ],
                    answer: "B"
                },
                {
                    question: "Which statement best matches the phrase \"Think and learn like a baby\"?",
                    options: [
                        "Babies memorize entire textbooks",
                        "Babies learn incrementally from experience and feedback",
                        "Babies only use unsupervised learning",
                        "Babies use SQL to learn"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is an example of unsupervised learning?",
                    options: [
                        "Regression",
                        "Classification",
                        "Clustering",
                        "Reinforcement learning with rewards"
                    ],
                    answer: "C"
                },
                {
                    question: "What is overfitting?",
                    options: [
                        "When a model is too simple and underperforms",
                        "When a model performs well on training data but poorly on new data",
                        "When training data is insufficiently labeled",
                        "When features are unscaled"
                    ],
                    answer: "B"
                },
                {
                    question: "Which dataset is typically used to evaluate final model performance?",
                    options: [
                        "Training set",
                        "Validation set",
                        "Test set",
                        "Development set"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is a simple way to reduce overfitting?",
                    options: [
                        "Increase model complexity",
                        "Use fewer training examples",
                        "Apply regularization or get more data",
                        "Remove the test set"
                    ],
                    answer: "C"
                },
                {
                    question: "What does \"bias\" in machine learning commonly refer to?",
                    options: [
                        "Preference for one vendor",
                        "Error from incorrect model assumptions (underfitting)",
                        "Random fluctuations in the data",
                        "Size of the dataset"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is a model evaluation metric for classification?",
                    options: [
                        "Mean Squared Error",
                        "Accuracy",
                        "R-squared",
                        "Log-likelihood only for regression"
                    ],
                    answer: "B"
                },
                {
                    question: "Cross-validation is mainly used to:",
                    options: [
                        "Scale features",
                        "Measure generalization and tune hyperparameters",
                        "Label data automatically",
                        "Convert categorical features to numeric"
                    ],
                    answer: "B"
                },
                {
                    question: "Which technique converts categorical variables into numeric form?",
                    options: [
                        "Regularization",
                        "One-hot encoding",
                        "Gradient descent",
                        "Cross-validation"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is NOT a machine learning subfield?",
                    options: [
                        "Supervised learning",
                        "Unsupervised learning",
                        "Compiler optimization",
                        "Reinforcement learning"
                    ],
                    answer: "C"
                },
                {
                    question: "Who benefits from thinking and learning like a baby when designing ML systems?",
                    options: [
                        "Only hardware engineers",
                        "Designers of learning algorithms and curricula for models",
                        "Database administrators only",
                        "Users of mobile apps"
                    ],
                    answer: "B"
                },
                {
                    question: "Machine Learning vs. Statistics: which is a typical difference?",
                    options: [
                        "Statistics never uses probability",
                        "ML focuses more on prediction and scalable algorithms; statistics focuses more on inference and uncertainty",
                        "ML cannot handle large datasets",
                        "Statistics only works with categorical data"
                    ],
                    answer: "B"
                },
                {
                    question: "In the bias-variance tradeoff, which change typically increases variance?",
                    options: [
                        "Simplifying the model",
                        "Increasing model complexity (e.g., deeper trees)",
                        "Adding strong regularization",
                        "Reducing number of features to zero"
                    ],
                    answer: "B"
                },
                {
                    question: "Which algorithm is commonly used for regression tasks?",
                    options: [
                        "K-means",
                        "Linear regression",
                        "Apriori",
                        "DBSCAN"
                    ],
                    answer: "B"
                },
                {
                    question: "What is regularization in model training?",
                    options: [
                        "A way to randomly drop training data",
                        "A technique to penalize large weights to prevent overfitting",
                        "A method of data augmentation only for images",
                        "A metric for model accuracy"
                    ],
                    answer: "B"
                },
                {
                    question: "In developing a model, which step comes after feature engineering?",
                    options: [
                        "Collecting raw data",
                        "Model selection and training",
                        "Deployment to production",
                        "User testing of the UI"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is a common regularization technique for linear models?",
                    options: [
                        "L1 (Lasso) and L2 (Ridge) penalties",
                        "Dropout only",
                        "K-fold cross-validation",
                        "One-hot encoding"
                    ],
                    answer: "A"
                },
                {
                    question: "What does early stopping do during training?",
                    options: [
                        "Stops training as soon as training loss increases",
                        "Stops training when validation performance stops improving to avoid overfitting",
                        "Stops training before any gradient update",
                        "Ensures the model reaches zero error on training set"
                    ],
                    answer: "B"
                },
                {
                    question: "Which measure is most appropriate for imbalanced binary classification?",
                    options: [
                        "Accuracy alone",
                        "Precision, recall, and F1-score",
                        "Mean Absolute Error",
                        "Sum of squared errors"
                    ],
                    answer: "B"
                },
                {
                    question: "Which process helps create training and test splits that preserve class distribution?",
                    options: [
                        "Random sampling without stratification",
                        "Stratified sampling",
                        "PCA transformation",
                        "Feature scaling"
                    ],
                    answer: "B"
                },
                {
                    question: "What role does cross-entropy loss play?",
                    options: [
                        "It measures distance between two vectors only in clustering",
                        "It is a common loss function for classification tasks that compares predicted probabilities to true labels",
                        "It scales features to the same range",
                        "It selects features automatically"
                    ],
                    answer: "B"
                },
                {
                    question: "In model development, \"pipelines\" are used to:",
                    options: [
                        "Speed up CPUs hardware-wise",
                        "Chain preprocessing and modeling steps so the same workflow is applied consistently",
                        "Visualize models only",
                        "Replace cross-validation"
                    ],
                    answer: "B"
                },
                {
                    question: "Which method reduces dimensionality while preserving variance?",
                    options: [
                        "KNN",
                        "PCA (Principal Component Analysis)",
                        "Decision trees",
                        "L1 regularization only"
                    ],
                    answer: "B"
                },
                {
                    question: "Which statement about training data quality is true?",
                    options: [
                        "More data always makes models worse",
                        "Clean, relevant, and correctly labeled data improves model performance",
                        "Data quality has no effect if model is complex enough",
                        "Only model choice matters, not data"
                    ],
                    answer: "B"
                },
                {
                    question: "What is a hyperparameter?",
                    options: [
                        "A parameter learned during training (like weights)",
                        "A configuration set before training (like learning rate, number of trees)",
                        "The test set labels",
                        "The final accuracy value"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following can help a model generalize better?",
                    options: [
                        "Reducing training data size dramatically",
                        "Using validation data for hyperparameter tuning and regularization methods",
                        "Tuning hyperparameters on the test set",
                        "Removing cross-validation"
                    ],
                    answer: "B"
                },
                {
                    question: "Consider a model with very low bias and very high variance. Which combination of remedies is most appropriate?",
                    options: [
                        "Increase model complexity further and remove regularization",
                        "Apply stronger regularization, gather more training data, or use ensemble averaging",
                        "Decrease training data and disable cross-validation",
                        "Convert problem to unsupervised learning"
                    ],
                    answer: "B"
                },
                {
                    question: "Which statement best describes the difference between \"overfitting\" and \"high variance\"?",
                    options: [
                        "Overfitting is only due to noisy labels, variance is due to small features",
                        "Overfitting is the observable behavior (train >> test performance); high variance is the model property causing it (sensitivity to data)",
                        "They are unrelated concepts",
                        "High variance always leads to perfect test performance"
                    ],
                    answer: "B"
                },
                {
                    question: "When would you prefer L1 regularization (Lasso) over L2 (Ridge)?",
                    options: [
                        "When you want to encourage sparse solutions and perform feature selection",
                        "When you want only small coefficient shrinkage but none exactly zero",
                        "When features are already binary",
                        "When you use clustering algorithms"
                    ],
                    answer: "A"
                },
                {
                    question: "Which validation method is most reliable for small datasets?",
                    options: [
                        "Single train/test split",
                        "K-fold cross-validation (with k large)",
                        "No validation at all",
                        "Using test labels during training"
                    ],
                    answer: "B"
                },
                {
                    question: "What effect does increasing model capacity (e.g., more layers in a neural network) generally have on the bias-variance curve?",
                    options: [
                        "Decreases both bias and variance always",
                        "Decreases bias but can increase variance if unchecked",
                        "Only affects computation time, not bias/variance",
                        "Increases bias only"
                    ],
                    answer: "B"
                },
                {
                    question: "In the context \"Machine Learning vs. Computer Science\", which point is generally correct?",
                    options: [
                        "Computer Science never studies algorithms",
                        "ML is a subfield of CS that focuses on data-driven algorithm design; CS more broadly handles systems, theory, and software engineering",
                        "CS only deals with hardware",
                        "ML does not rely on algorithms"
                    ],
                    answer: "B"
                },
                {
                    question: "A model shows increasing training accuracy and decreasing validation accuracy over epochs. What is happening?",
                    options: [
                        "Underfitting",
                        "Overfitting to the training data",
                        "Perfect generalization",
                        "Data leakage into the test set only"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following best describes \"data leakage\"?",
                    options: [
                        "When test data is accidentally used in training, inflating performance estimates",
                        "When data is compressed to save space",
                        "When features are normalized",
                        "When labels are balanced"
                    ],
                    answer: "A"
                },
                {
                    question: "Ensemble methods (e.g., bagging) primarily reduce which of the following?",
                    options: [
                        "Bias only",
                        "Variance primarily (and sometimes bias)",
                        "Data size",
                        "Number of features"
                    ],
                    answer: "B"
                },
                {
                    question: "Suppose you have categorical features with many rare categories. Which approach can help reduce dimensionality while preserving information?",
                    options: [
                        "One-hot encode all categories regardless of frequency",
                        "Group rare categories into an \"Other\" bucket or use embedding representations",
                        "Remove the entire feature always",
                        "Use L2 regularization on raw strings"
                    ],
                    answer: "B"
                }
            ],
            "2": [
                {
                    question: "Which of the following is NOT an essential step in data cleaning?",
                    options: [
                        "Removal of unwanted observations",
                        "Fixing structural errors",
                        "Managing outliers",
                        "Model deployment"
                    ],
                    answer: "D"
                },
                {
                    question: "Which technique replaces missing values with the mean or median?",
                    options: [
                        "Deletion",
                        "Mean/Median Imputation",
                        "Predictive Modeling",
                        "Multiple Imputation"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following methods uses the Interquartile Range (IQR) to identify outliers?",
                    options: [
                        "Z-score Method",
                        "Box Plot Method",
                        "Regression",
                        "Clustering"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the main purpose of Feature Scaling?",
                    options: [
                        "Increasing the number of features",
                        "Normalizing the range of independent variables",
                        "Removing missing values",
                        "Transforming categorical data"
                    ],
                    answer: "B"
                },
                {
                    question: "When is Min-Max scaling preferred?",
                    options: [
                        "When you need to handle outliers better",
                        "When you need bounded values",
                        "When data has a normal distribution",
                        "When data is non-linear"
                    ],
                    answer: "B"
                },
                {
                    question: "Which technique converts categorical variables into a numerical format by creating binary features?",
                    options: [
                        "Min-Max scaling",
                        "Standardization",
                        "One-Hot Encoding",
                        "Binning"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is NOT a challenge of the Curse of Dimensionality?",
                    options: [
                        "Increased computational cost",
                        "Data sparsity",
                        "Improved model performance",
                        "Visualization difficulty"
                    ],
                    answer: "C"
                },
                {
                    question: "What is a key benefit of Dimensionality Reduction?",
                    options: [
                        "Increased model complexity",
                        "Reduced computation time",
                        "Increased storage requirements",
                        "Making data less interpretable"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following techniques is a linear dimensionality reduction method?",
                    options: [
                        "t-SNE",
                        "UMAP",
                        "Principal Component Analysis (PCA)",
                        "Feature Selection"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the first principal component in PCA?",
                    options: [
                        "The new dimension with the least variance",
                        "The new dimension with the highest variance",
                        "The mean of the original data",
                        "The standard deviation of the data"
                    ],
                    answer: "B"
                },
                {
                    question: "If the covariance between two features is close to zero, what does that mean?",
                    options: [
                        "The features are positively correlated",
                        "The features are negatively correlated",
                        "The features are independent",
                        "The features are identical"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is the first step in the PCA algorithm?",
                    options: [
                        "Calculate the covariance matrix",
                        "Center the normalized TS features",
                        "Calculate eigenvectors and eigenvalues",
                        "Keep eigenvectors with the largest eigenvalues"
                    ],
                    answer: "B"
                },
                {
                    question: "What type of machine learning learns from labeled data?",
                    options: [
                        "Unsupervised Learning",
                        "Reinforcement Learning",
                        "Supervised Learning",
                        "Semi-supervised Learning"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is an example of Supervised Learning?",
                    options: [
                        "Customer segmentation",
                        "Email spam filtering",
                        "Association rule mining",
                        "Dimensionality reduction"
                    ],
                    answer: "B"
                },
                {
                    question: "What type of machine learning is used to predict a categorical class?",
                    options: [
                        "Regression",
                        "Classification",
                        "Clustering",
                        "Association"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a subtype of Unsupervised Learning that aims to group similar data?",
                    options: [
                        "Regression",
                        "Classification",
                        "Clustering",
                        "Association"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the hybrid approach that uses a small amount of labeled data and a large amount of unlabeled data?",
                    options: [
                        "Supervised Learning",
                        "Unsupervised Learning",
                        "Semi-supervised Learning",
                        "Reinforcement Learning"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is NOT a component of Reinforcement Learning?",
                    options: [
                        "Agent",
                        "Environment",
                        "Labeled data",
                        "Reward"
                    ],
                    answer: "C"
                },
                {
                    question: "What type of Reinforcement Learning learns from experience only?",
                    options: [
                        "Model-based",
                        "Model-free",
                        "Value-based",
                        "Policy-based"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a value-based Reinforcement Learning algorithm?",
                    options: [
                        "REINFORCE",
                        "PPO",
                        "Q-Learning",
                        "A3C"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the challenge in Reinforcement Learning where feedback comes after many steps?",
                    options: [
                        "Exploration vs. Exploitation",
                        "Delayed Rewards",
                        "Sparse Rewards",
                        "High Dimensionality"
                    ],
                    answer: "B"
                },
                {
                    question: "What is a measure of the amount of variation or dispersion of a set of values?",
                    options: [
                        "Mean",
                        "Median",
                        "Standard Deviation",
                        "Mode"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the relationship between standard deviation and variance?",
                    options: [
                        "Standard deviation is the square of variance",
                        "Standard deviation is the square root of variance",
                        "Standard deviation is equal to variance",
                        "There is no relationship between them"
                    ],
                    answer: "B"
                },
                {
                    question: "A low standard deviation indicates that:",
                    options: [
                        "Values are widely spread",
                        "Values tend to be close to the mean",
                        "There are many outliers",
                        "Data is inconsistent"
                    ],
                    answer: "B"
                },
                {
                    question: "In the machine learning lifecycle, which step follows data collection?",
                    options: [
                        "Problem Definition",
                        "Data Cleaning & Preprocessing",
                        "Exploratory Data Analysis",
                        "Model Training"
                    ],
                    answer: "B"
                },
                {
                    question: "Which step involves using histograms and box plots to discover trends and relationships in data?",
                    options: [
                        "Data Collection",
                        "Feature Engineering & Selection",
                        "Exploratory Data Analysis (EDA)",
                        "Model Evaluation"
                    ],
                    answer: "C"
                },
                {
                    question: "Which step involves tuning hyperparameters to improve model performance?",
                    options: [
                        "Model Training",
                        "Model Deployment",
                        "Evaluation & Tuning",
                        "Model Selection"
                    ],
                    answer: "C"
                },
                {
                    question: "Which step involves integrating the model into real-world applications?",
                    options: [
                        "Monitoring & Maintenance",
                        "Model Deployment",
                        "Model Training",
                        "Problem Definition"
                    ],
                    answer: "B"
                },
                {
                    question: "Which technique converts data from one form to another to make it more suitable for analysis?",
                    options: [
                        "Feature Scaling",
                        "One-Hot Encoding",
                        "Data Transformation",
                        "Outlier Management"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is the definition of Machine Learning?",
                    options: [
                        "A branch of AI that explicitly programs computers",
                        "A subset of AI that gives computers the ability to learn from data without being explicitly programmed",
                        "A technique for dimensionality reduction in datasets",
                        "The process of cleaning data from missing values"
                    ],
                    answer: "B"
                },
                {
                    question: "What type of Machine Learning is used for customer segmentation?",
                    options: [
                        "Supervised Learning",
                        "Unsupervised Learning",
                        "Semi-supervised Learning",
                        "Reinforcement Learning"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a technique used in Semi-supervised Learning?",
                    options: [
                        "Q-Learning",
                        "PCA",
                        "Self-training",
                        "Regression"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the first step in the Machine Learning Lifecycle?",
                    options: [
                        "Data Collection",
                        "Data Cleaning & Preprocessing",
                        "Problem Definition",
                        "Model Training"
                    ],
                    answer: "C"
                }
            ],
            "3": [
                {
                    question: "What does linear regression primarily aim to analyze?",
                    options: [
                        "Relationship between independent and dependent variables",
                        "Clustering patterns in data",
                        "Dimensionality reduction",
                        "Classification of outcomes"
                    ],
                    answer: "A"
                },
                {
                    question: "What is the dependent variable also called in regression?",
                    options: [
                        "Predictor",
                        "Response",
                        "Independent",
                        "Feature"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following best defines the error term?",
                    options: [
                        "The slope of the regression line",
                        "The difference between predicted and observed values",
                        "The intercept of the model",
                        "The dependent variable"
                    ],
                    answer: "B"
                },
                {
                    question: "The residual is calculated as:",
                    options: [
                        "ŷ - y",
                        "y - ŷ",
                        "x - y",
                        "βx – y"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the most common loss function in linear regression?",
                    options: [
                        "Mean Absolute Error",
                        "Quadratic Loss (Least Squares)",
                        "Hinge Loss",
                        "Cross-Entropy"
                    ],
                    answer: "B"
                },
                {
                    question: "Which metric is analogous to variance?",
                    options: [
                        "MAE",
                        "RMSE",
                        "MSE",
                        "R²"
                    ],
                    answer: "C"
                },
                {
                    question: "Which metric is analogous to standard deviation?",
                    options: [
                        "MAE",
                        "RMSE",
                        "MAPE",
                        "Adjusted R²"
                    ],
                    answer: "B"
                },
                {
                    question: "Which error metric is expressed as a percentage?",
                    options: [
                        "MSE",
                        "MAE",
                        "MAPE",
                        "RMSE"
                    ],
                    answer: "C"
                },
                {
                    question: "MAPE becomes problematic when:",
                    options: [
                        "Residuals are normally distributed",
                        "Actual values are close to zero",
                        "Predictions are exact",
                        "R² is high"
                    ],
                    answer: "B"
                },
                {
                    question: "A residual plot is useful to check:",
                    options: [
                        "Multicollinearity",
                        "Normality of residuals",
                        "Patterns or violations in regression assumptions",
                        "Feature scaling"
                    ],
                    answer: "C"
                },
                {
                    question: "What does R-squared represent?",
                    options: [
                        "Percentage of variance explained by independent variables",
                        "Standard error of residuals",
                        "Multicollinearity index",
                        "Probability of hypothesis"
                    ],
                    answer: "A"
                },
                {
                    question: "The adjusted R-squared is preferred because:",
                    options: [
                        "It always increases with more predictors",
                        "It penalizes irrelevant variables",
                        "It is always higher than R²",
                        "It ignores variance"
                    ],
                    answer: "B"
                },
                {
                    question: "A p-value less than 0.05 indicates:",
                    options: [
                        "Accept null hypothesis",
                        "Reject null hypothesis",
                        "Variables are irrelevant",
                        "Model overfitting"
                    ],
                    answer: "B"
                },
                {
                    question: "Multiple linear regression allows:",
                    options: [
                        "Use of one independent variable only",
                        "Testing multiple predictors simultaneously",
                        "Only categorical predictors",
                        "Predictions without error"
                    ],
                    answer: "B"
                },
                {
                    question: "The general form of multiple linear regression is:",
                    options: [
                        "Y = a + bX + e",
                        "Y = a + b1X1 + b2X2 + … + bkXk + e",
                        "Y = X + Y + Z",
                        "Y = a + Bx"
                    ],
                    answer: "B"
                },
                {
                    question: "Which paradox highlights confounding effects?",
                    options: [
                        "Central Limit Theorem",
                        "Simpson's Paradox",
                        "Bayes' Theorem",
                        "Chebyshev's Inequality"
                    ],
                    answer: "B"
                },
                {
                    question: "Which assumption is part of BLUE criteria?",
                    options: [
                        "Linear relationship",
                        "No irrelevant variables",
                        "Error mean equals zero",
                        "All of the above"
                    ],
                    answer: "D"
                },
                {
                    question: "What does BLUE stand for in regression?",
                    options: [
                        "Best Linear Unbiased Estimator",
                        "Basic Linear Univariate Equation",
                        "Balanced Learning Using Errors",
                        "Bayesian Linear Unbiased Estimate"
                    ],
                    answer: "A"
                },
                {
                    question: "Violation of BLUE assumptions may lead to:",
                    options: [
                        "Overfitting",
                        "Biased estimates",
                        "Higher R²",
                        "Lower p-values"
                    ],
                    answer: "B"
                },
                {
                    question: "Dummy variables are used to represent:",
                    options: [
                        "Continuous features",
                        "Nominal categorical variables",
                        "Error terms",
                        "Interaction terms"
                    ],
                    answer: "B"
                },
                {
                    question: "If a categorical variable has k levels, how many dummy variables are used?",
                    options: [
                        "k",
                        "k-1",
                        "k+1",
                        "Unlimited"
                    ],
                    answer: "B"
                },
                {
                    question: "Leaving out one dummy variable is necessary to avoid:",
                    options: [
                        "Overfitting",
                        "Dummy variable trap (perfect multicollinearity)",
                        "High variance",
                        "Bias"
                    ],
                    answer: "B"
                },
                {
                    question: "In regression with dummy variables, the intercept represents:",
                    options: [
                        "Value for included categories",
                        "Predicted value for excluded category",
                        "Average across all categories",
                        "Residual mean"
                    ],
                    answer: "B"
                },
                {
                    question: "Interaction terms are created by:",
                    options: [
                        "Adding variables",
                        "Multiplying two variables",
                        "Subtracting variables",
                        "Dividing variables"
                    ],
                    answer: "B"
                },
                {
                    question: "An interaction term indicates:",
                    options: [
                        "Independent effect of each variable",
                        "Joint effect of two variables",
                        "Multicollinearity",
                        "Outliers"
                    ],
                    answer: "B"
                },
                {
                    question: "Continuous interaction terms involve:",
                    options: [
                        "Cross-product of two continuous variables",
                        "Cross-product of categorical variables",
                        "Difference of residuals",
                        "Scaling features"
                    ],
                    answer: "A"
                },
                {
                    question: "Standardized coefficients allow comparison of:",
                    options: [
                        "Raw values of predictors",
                        "Relative importance of predictors on different scales",
                        "Error terms",
                        "P-values"
                    ],
                    answer: "B"
                },
                {
                    question: "It does not make sense to standardize:",
                    options: [
                        "Continuous variables",
                        "Dummy variables",
                        "Interaction terms",
                        "Residuals"
                    ],
                    answer: "B"
                },
                {
                    question: "Regression coefficients are unbiased when:",
                    options: [
                        "BLUE assumptions hold",
                        "Data has outliers",
                        "P-values are high",
                        "Adjusted R² is small"
                    ],
                    answer: "A"
                },
                {
                    question: "Which measure detects bias in model predictions?",
                    options: [
                        "MAE",
                        "MSE",
                        "MPE",
                        "RMSE"
                    ],
                    answer: "C"
                },
                {
                    question: "The error term is assumed to have:",
                    options: [
                        "Mean = 0",
                        "Constant variance",
                        "Normal distribution",
                        "All of the above"
                    ],
                    answer: "D"
                },
                {
                    question: "Which metric is most sensitive to outliers?",
                    options: [
                        "MAE",
                        "MSE",
                        "MAPE",
                        "R²"
                    ],
                    answer: "B"
                },
                {
                    question: "What is overfitting in regression?",
                    options: [
                        "Using too few predictors",
                        "Adding too many predictors, reducing generalizability",
                        "Perfectly unbiased model",
                        "Standardized residuals"
                    ],
                    answer: "B"
                },
                {
                    question: "The regression line equation for simple linear regression is:",
                    options: [
                        "y = mx + c",
                        "y = β0 + β1x + ε",
                        "y = ax² + b",
                        "y = log(x)"
                    ],
                    answer: "B"
                },
                {
                    question: "Which is a measure of goodness-of-fit?",
                    options: [
                        "RMSE",
                        "R²",
                        "p-value",
                        "Dummy variable"
                    ],
                    answer: "B"
                },
                {
                    question: "The p-value for a coefficient tests:",
                    options: [
                        "Whether the coefficient = 0",
                        "Whether residuals are normal",
                        "Whether R² = 1",
                        "Whether interaction exists"
                    ],
                    answer: "A"
                },
                {
                    question: "If residuals show patterns in a plot, it suggests:",
                    options: [
                        "Model fits well",
                        "Violation of regression assumptions",
                        "P-values are small",
                        "Standardization is required"
                    ],
                    answer: "B"
                },
                {
                    question: "In multiple regression, holding other variables constant helps:",
                    options: [
                        "Control for confounding effects",
                        "Increase R²",
                        "Eliminate residuals",
                        "Reduce number of dummies"
                    ],
                    answer: "A"
                },
                {
                    question: "Which error metric can be undefined when actual values are zero?",
                    options: [
                        "MAE",
                        "MSE",
                        "RMSE",
                        "MAPE"
                    ],
                    answer: "D"
                }
            ],
            "4": [
                {
                    question: "What is a Decision Tree?",
                    options: [
                        "A type of unsupervised learning model",
                        "A supervised learning model that predicts outcomes using simple decision rules",
                        "A database storage structure",
                        "A neural network"
                    ],
                    answer: "B"
                },
                {
                    question: "What is represented by the Root Node in a decision tree?",
                    options: [
                        "The final prediction",
                        "The first split containing the entire dataset",
                        "A branch of the tree",
                        "A pure node only"
                    ],
                    answer: "B"
                },
                {
                    question: "What do Leaf Nodes represent?",
                    options: [
                        "The decision point for splitting data",
                        "The final output (class label or value)",
                        "Random noise in the data",
                        "Data preprocessing steps"
                    ],
                    answer: "B"
                },
                {
                    question: "Why are decision trees called \"trees\"?",
                    options: [
                        "They grow in forests",
                        "They start with a root, branch out into nodes, and end with leaves representing predictions",
                        "They use tree data structures in memory",
                        "They only apply to hierarchical data"
                    ],
                    answer: "B"
                },
                {
                    question: "What type of problems can decision trees solve?",
                    options: [
                        "Classification and Regression",
                        "Only Clustering",
                        "Only Dimensionality Reduction",
                        "None of the above"
                    ],
                    answer: "A"
                },
                {
                    question: "Which problem is an example of classification?",
                    options: [
                        "Predicting the price of a house",
                        "Predicting whether a customer will buy a product (Yes/No)",
                        "Forecasting temperature",
                        "Estimating sales revenue"
                    ],
                    answer: "B"
                },
                {
                    question: "Which problem is an example of regression?",
                    options: [
                        "Predicting spam emails",
                        "Classifying customers by gender",
                        "Predicting house price",
                        "Determining customer churn category"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is an advantage of decision trees?",
                    options: [
                        "Hard to interpret",
                        "Easy to understand and explain decision logic",
                        "Requires complex data preprocessing",
                        "Only works with numeric data"
                    ],
                    answer: "B"
                },
                {
                    question: "What is a Decision Node?",
                    options: [
                        "A node that contains a final prediction",
                        "A node that splits data based on a feature",
                        "A leaf node",
                        "A branch with no decision"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is NOT part of a decision tree structure?",
                    options: [
                        "Root Node",
                        "Leaf Node",
                        "Branch",
                        "Cluster Center"
                    ],
                    answer: "D"
                },
                {
                    question: "What is the general goal of a decision tree in supervised learning?",
                    options: [
                        "To cluster data into groups",
                        "To predict outcomes for new, unseen data using decision rules learned from training data",
                        "To store data efficiently",
                        "To reduce the dimensionality of features"
                    ],
                    answer: "B"
                },
                {
                    question: "Which type of data can decision trees handle?",
                    options: [
                        "Only numerical",
                        "Only categorical",
                        "Both numerical and categorical",
                        "Only text data"
                    ],
                    answer: "C"
                },
                {
                    question: "What are common real-world applications of decision trees?",
                    options: [
                        "Healthcare, Finance, Marketing, HR",
                        "Weather simulation only",
                        "Database indexing",
                        "Image compression"
                    ],
                    answer: "A"
                },
                {
                    question: "In classification problems, what is the target variable?",
                    options: [
                        "Continuous numerical value",
                        "Discrete class label",
                        "Feature matrix",
                        "None of the above"
                    ],
                    answer: "B"
                },
                {
                    question: "In regression problems, what is the target variable?",
                    options: [
                        "Continuous numerical value",
                        "Discrete class label",
                        "Feature matrix",
                        "None of the above"
                    ],
                    answer: "A"
                },
                {
                    question: "Why are decision trees easy to interpret?",
                    options: [
                        "They require complex mathematical formulas",
                        "They can be converted into simple if-then rules",
                        "They only work on small datasets",
                        "They ignore categorical data"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the significance of branches in a decision tree?",
                    options: [
                        "They store raw data",
                        "They represent the outcome of a test (Yes/No or range)",
                        "They are used for pruning only",
                        "They determine feature importance"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the depth of a decision tree?",
                    options: [
                        "Number of nodes in the tree",
                        "Number of levels from the root to the deepest leaf",
                        "Number of features",
                        "Number of classes"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the main benefit of using decision trees in marketing or finance?",
                    options: [
                        "High computational cost",
                        "Easy understanding of decision-making process",
                        "Cannot handle missing values",
                        "Only works for small datasets"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a limitation of decision trees?",
                    options: [
                        "Easy to interpret",
                        "Prone to overfitting",
                        "Requires little data preprocessing",
                        "Handles non-linear relationships"
                    ],
                    answer: "B"
                },
                {
                    question: "What approach is used to build a decision tree?",
                    options: [
                        "Top-down, greedy approach",
                        "Bottom-up approach",
                        "Randomized selection",
                        "Genetic algorithm"
                    ],
                    answer: "A"
                },
                {
                    question: "How does a decision tree select the best feature to split?",
                    options: [
                        "Random selection",
                        "Maximizing impurity or information gain",
                        "Minimizing feature importance",
                        "Based on feature order in dataset"
                    ],
                    answer: "B"
                },
                {
                    question: "What is an \"impure\" node?",
                    options: [
                        "Node with examples from only one class",
                        "Node with mixed examples from multiple classes",
                        "Node with no children",
                        "Leaf node"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following measures is used to calculate impurity in classification trees?",
                    options: [
                        "Entropy and Gini Impurity",
                        "Variance Reduction",
                        "Mean Squared Error",
                        "Root Mean Square"
                    ],
                    answer: "A"
                },
                {
                    question: "What is the main goal of splitting a node?",
                    options: [
                        "Reduce number of features",
                        "Create branches that are as pure as possible",
                        "Increase tree depth",
                        "Randomly divide data"
                    ],
                    answer: "B"
                },
                {
                    question: "Which criterion is typically faster in computation?",
                    options: [
                        "Entropy",
                        "Gini Impurity",
                        "Information Gain",
                        "Variance Reduction"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is true about Entropy?",
                    options: [
                        "Higher entropy means the node is purer",
                        "Lower entropy means the node is purer",
                        "Entropy does not measure impurity",
                        "Entropy is used only in regression"
                    ],
                    answer: "B"
                },
                {
                    question: "What does Information Gain represent?",
                    options: [
                        "Increase in entropy",
                        "Reduction in impurity after a split",
                        "Tree depth",
                        "Leaf node value"
                    ],
                    answer: "B"
                },
                {
                    question: "What type of split is common in CART (Classification and Regression Trees)?",
                    options: [
                        "Binary split",
                        "Multi-way split only",
                        "Random split",
                        "No split"
                    ],
                    answer: "A"
                },
                {
                    question: "When is a node considered \"pure\"?",
                    options: [
                        "When all examples in the node belong to a single class",
                        "When node has equal number of classes",
                        "When the node has multiple children",
                        "When the node depth is 1"
                    ],
                    answer: "A"
                },
                {
                    question: "What is overfitting in decision trees?",
                    options: [
                        "Tree performs well on unseen data",
                        "Tree memorizes training data and performs poorly on new data",
                        "Tree grows shallow",
                        "Tree ignores noisy data"
                    ],
                    answer: "B"
                },
                {
                    question: "Which is a common cause of overfitting?",
                    options: [
                        "Shallow tree",
                        "Very deep tree learning noise in training data",
                        "Pre-pruning",
                        "Using too few features"
                    ],
                    answer: "B"
                },
                {
                    question: "What is pruning in decision trees?",
                    options: [
                        "Growing the tree further",
                        "Cutting off branches to reduce complexity and improve generalization",
                        "Adding more features",
                        "Randomly splitting data"
                    ],
                    answer: "B"
                },
                {
                    question: "Pre-pruning refers to:",
                    options: [
                        "Stopping tree growth early based on criteria like max_depth",
                        "Trimming branches after full tree construction",
                        "Increasing tree depth",
                        "Changing target variable"
                    ],
                    answer: "A"
                },
                {
                    question: "Post-pruning refers to:",
                    options: [
                        "Early stopping of growth",
                        "Removing branches after full tree construction",
                        "Random feature selection",
                        "Increasing impurity"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is an advantage of decision trees?",
                    options: [
                        "Difficult to interpret",
                        "Requires complex preprocessing",
                        "Can model non-linear relationships",
                        "Only works on small datasets"
                    ],
                    answer: "C"
                },
                {
                    question: "Which limitation is associated with small changes in data?",
                    options: [
                        "High bias",
                        "High variance",
                        "Faster computation",
                        "Reduced impurity"
                    ],
                    answer: "B"
                },
                {
                    question: "Why might decision trees struggle with smooth functions?",
                    options: [
                        "They are axis-parallel and produce \"jagged\" decision boundaries",
                        "They cannot handle numeric data",
                        "They ignore categorical variables",
                        "They overfit only small datasets"
                    ],
                    answer: "A"
                },
                {
                    question: "Which scenario is suitable for using decision trees?",
                    options: [
                        "Small noisy datasets",
                        "Business rules modeling with interpretability priority",
                        "Predicting a sine wave precisely",
                        "Data with smooth continuous functions"
                    ],
                    answer: "B"
                },
                {
                    question: "What type of bias-variance trade-off occurs after pruning?",
                    options: [
                        "Low bias, high variance",
                        "Slightly higher bias, lower variance",
                        "No change",
                        "Always reduces bias"
                    ],
                    answer: "B"
                }
            ],
            "5": [
                {
                    question: "What is the primary purpose of Bootstrapping in Random Forest?",
                    options: [
                        "To reduce the number of features considered at each split.",
                        "To randomly select samples from the training dataset with replacement to train each decision tree.",
                        "To combine the outputs of all decision trees through averaging.",
                        "To estimate the model's performance using left-out samples."
                    ],
                    answer: "B"
                },
                {
                    question: "In Bootstrapping, if a dataset has 'n' samples, how many samples are typically used to train each decision tree?",
                    options: [
                        "n/2 samples without replacement.",
                        "n samples with replacement.",
                        "n samples without replacement.",
                        "2n samples with replacement."
                    ],
                    answer: "B"
                },
                {
                    question: "Which algorithm is typically used for constructing each decision tree in a Random Forest?",
                    options: [
                        "ID3",
                        "C4.5",
                        "CART (Classification and Regression Tree)",
                        "CHAID"
                    ],
                    answer: "C"
                },
                {
                    question: "What is Feature Bagging in the context of Random Forest?",
                    options: [
                        "Combining multiple features into a single meta-feature.",
                        "Selecting a random subset of features at each split instead of considering all features.",
                        "Duplicating features to increase the dataset size.",
                        "Removing features with low importance before training."
                    ],
                    answer: "B"
                },
                {
                    question: "For classification tasks, how are the predictions from individual trees combined in Random Forest?",
                    options: [
                        "By averaging their outputs.",
                        "By taking the maximum predicted probability.",
                        "By using majority voting (mode of outputs).",
                        "By selecting the prediction of the most accurate tree."
                    ],
                    answer: "C"
                },
                {
                    question: "For regression tasks, how are the predictions from individual trees combined in Random Forest?",
                    options: [
                        "By taking the median of their outputs.",
                        "By using majority voting (mode of outputs).",
                        "By averaging their outputs (mean of outputs).",
                        "By summing their outputs."
                    ],
                    answer: "C"
                },
                {
                    question: "What is Out-of-Bag (OOB) Error Estimation used for in Random Forest?",
                    options: [
                        "To determine the optimal number of trees in the forest.",
                        "To estimate the model's performance using samples not used in training each tree.",
                        "To reduce the correlation between individual decision trees.",
                        "To identify and remove noisy features from the dataset."
                    ],
                    answer: "B"
                },
                {
                    question: "Approximately what percentage of the data is left out (Out-of-Bag) for each tree during bootstrapping?",
                    options: [
                        "~10%",
                        "~25%",
                        "~33% (1/3)",
                        "~50%"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is NOT a common hyperparameter tuning algorithm mentioned for Random Forest?",
                    options: [
                        "Grid Search",
                        "Random Search",
                        "Bayesian Optimization",
                        "Gradient Descent"
                    ],
                    answer: "D"
                },
                {
                    question: "What does the hyperparameter 'n_estimators' control in Random Forest?",
                    options: [
                        "The maximum depth of each tree.",
                        "The number of features considered at each split.",
                        "The number of decision trees in the forest.",
                        "The minimum number of samples required to split an internal node."
                    ],
                    answer: "C"
                },
                {
                    question: "What is the primary goal of SMOTE?",
                    options: [
                        "To reduce the dimensionality of the dataset.",
                        "To balance an imbalanced dataset by synthetically generating new samples for the minority class.",
                        "To remove outliers from the dataset.",
                        "To improve the interpretability of decision trees."
                    ],
                    answer: "B"
                },
                {
                    question: "How does SMOTE generate new synthetic samples for the minority class?",
                    options: [
                        "By duplicating existing minority samples.",
                        "By interpolating between a minority sample and its k nearest neighbors.",
                        "By randomly generating points within the feature space.",
                        "By removing majority class samples."
                    ],
                    answer: "B"
                },
                {
                    question: "Why is SMOTE particularly useful in scenarios like fraud detection?",
                    options: [
                        "It speeds up the training process of Random Forest.",
                        "It helps prevent the model from being biased toward the majority class.",
                        "It reduces the complexity of the decision trees.",
                        "It makes the model more robust to noisy data."
                    ],
                    answer: "B"
                },
                {
                    question: "What is Recursive Feature Elimination (RFE)?",
                    options: [
                        "An algorithm for generating new features from existing ones.",
                        "A method for selecting the most important features by recursively removing the least important ones.",
                        "A technique to combine multiple feature sets.",
                        "A process to transform features into a lower-dimensional space."
                    ],
                    answer: "B"
                },
                {
                    question: "What is one benefit of using RFE?",
                    options: [
                        "It increases the computational cost of model training.",
                        "It makes the model more prone to overfitting.",
                        "It improves model performance and interpretability.",
                        "It requires more data for training."
                    ],
                    answer: "C"
                },
                {
                    question: "Random Forest is categorized as which type of ensemble method?",
                    options: [
                        "Boosting",
                        "Stacking",
                        "Bagging",
                        "Adaboost"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the main difference between Random Forest and Boosting?",
                    options: [
                        "Random Forest uses decision trees, while Boosting uses neural networks.",
                        "Random Forest trains models sequentially, while Boosting trains them in parallel.",
                        "Random Forest trains trees in parallel with no dependence, while Boosting trains them sequentially focusing on errors.",
                        "Random Forest aims to reduce bias, while Boosting aims to reduce variance."
                    ],
                    answer: "C"
                },
                {
                    question: "What is the purpose of Bagging in Random Forest?",
                    options: [
                        "To increase the bias of decision trees.",
                        "To reduce the variance of decision trees.",
                        "To make decision trees more complex.",
                        "To select the best single decision tree."
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a characteristic of Boosting algorithms?",
                    options: [
                        "They train models in parallel.",
                        "Each new model focuses on the errors of the previous ones.",
                        "They primarily aim to reduce variance.",
                        "They use only decision trees as base learners."
                    ],
                    answer: "B"
                },
                {
                    question: "How does Stacking differ from Random Forest?",
                    options: [
                        "Stacking only uses decision trees, while Random Forest can mix any algorithms.",
                        "Stacking combines different types of models using a meta-model, while Random Forest uses many decision trees only.",
                        "Stacking trains models in parallel, while Random Forest trains them sequentially.",
                        "Stacking focuses on reducing variance, while Random Forest focuses on reducing bias."
                    ],
                    answer: "B"
                },
                {
                    question: "What is the role of the Gini Index or Entropy in Decision Tree Construction within Random Forest?",
                    options: [
                        "To determine the number of trees to build.",
                        "To measure the impurity of a node and guide the best split.",
                        "To select a random subset of features.",
                        "To combine predictions from multiple trees."
                    ],
                    answer: "B"
                },
                {
                    question: "When building a decision tree in Random Forest, what happens at each node regarding features?",
                    options: [
                        "All features are considered for the best split.",
                        "A pre-defined set of features is always used.",
                        "A random subset of features is selected.",
                        "Only the most important feature is considered."
                    ],
                    answer: "C"
                },
                {
                    question: "If you have 9 features (F1 to F9) and are performing classification, how many features are typically randomly chosen at each node split in Random Forest?",
                    options: [
                        "9 (all features)",
                        "3 (√p where p=9)",
                        "4 (p/3 where p=9)",
                        "1"
                    ],
                    answer: "B"
                },
                {
                    question: "What is a potential issue if an imbalanced dataset is used directly to train a Random Forest model without techniques like SMOTE?",
                    options: [
                        "The model will overfit to the minority class.",
                        "The model will be biased toward the majority class, leading to poor minority class predictions.",
                        "The training process will be significantly slower.",
                        "The model will have perfect accuracy on both classes."
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a traditional solution for imbalanced datasets that risks losing information?",
                    options: [
                        "Random Oversampling",
                        "SMOTE",
                        "Random Undersampling",
                        "Feature Bagging"
                    ],
                    answer: "C"
                },
                {
                    question: "In SMOTE, what is typically used to find the k nearest neighbors?",
                    options: [
                        "Manhattan distance",
                        "Cosine similarity",
                        "Euclidean distance",
                        "Jaccard index"
                    ],
                    answer: "C"
                },
                {
                    question: "What does the 'max_depth' hyperparameter control in Random Forest?",
                    options: [
                        "The number of trees in the forest.",
                        "The maximum depth of each individual decision tree.",
                        "The number of features considered at each split.",
                        "The minimum number of samples required to split a node."
                    ],
                    answer: "B"
                },
                {
                    question: "Which hyperparameter determines the number of features to consider at each split?",
                    options: [
                        "n_estimators",
                        "max_depth",
                        "max_features",
                        "min_samples_leaf"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the formula used in SMOTE to create a synthetic point?",
                    options: [
                        "x_new = x - delta * (x_nn - x)",
                        "x_new = x + delta * (x_nn + x)",
                        "x_new = x + delta * (x_nn - x)",
                        "x_new = x_nn + delta * (x - x_nn)"
                    ],
                    answer: "C"
                },
                {
                    question: "In the context of Random Forest, what does 'p' represent when determining the number of features to consider at each split for regression tasks?",
                    options: [
                        "The number of samples in the dataset.",
                        "The number of classes in the target variable.",
                        "The total number of features.",
                        "The number of decision trees."
                    ],
                    answer: "C"
                },
                {
                    question: "What is the typical setting for the number of features considered at each split for regression tasks in Random Forest?",
                    options: [
                        "√p features",
                        "p features",
                        "p/2 features",
                        "p/3 features"
                    ],
                    answer: "D"
                },
                {
                    question: "Which of the following is NOT a benefit of Recursive Feature Elimination (RFE)?",
                    options: [
                        "Improves model interpretability.",
                        "Reduces overfitting.",
                        "Increases computation cost.",
                        "Improves model performance."
                    ],
                    answer: "C"
                },
                {
                    question: "What is the relationship between Random Forest and Bagging?",
                    options: [
                        "Random Forest is a type of Boosting method.",
                        "Random Forest is a type of Stacking method.",
                        "Random Forest is a Bagging method.",
                        "Bagging is a component of Random Forest, but Random Forest is not a Bagging method."
                    ],
                    answer: "C"
                },
                {
                    question: "In the context of ensemble methods, what does 'meta-model' refer to in Stacking?",
                    options: [
                        "The first model trained in the ensemble.",
                        "A model that learns the best combination of predictions from other base models.",
                        "A model used for feature selection.",
                        "A model that generates synthetic data."
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is a popular Boosting algorithm mentioned in the document?",
                    options: [
                        "CART",
                        "AdaBoost",
                        "SMOTE",
                        "RFE"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the primary purpose of Random Oversampling as a traditional solution for imbalanced datasets?",
                    options: [
                        "To remove samples from the majority class.",
                        "To duplicate minority samples.",
                        "To generate synthetic samples.",
                        "To reduce the number of features."
                    ],
                    answer: "B"
                },
                {
                    question: "What is a risk associated with Random Oversampling?",
                    options: [
                        "Loss of information.",
                        "Increased bias towards the minority class.",
                        "Overfitting.",
                        "Underfitting."
                    ],
                    answer: "C"
                },
                {
                    question: "What is the key idea behind SMOTE for generating new points?",
                    options: [
                        "Randomly selecting points from the majority class.",
                        "Generating new points along the line segments between a minority sample and its nearest neighbors.",
                        "Creating new points by extrapolating from existing minority samples.",
                        "Duplicating minority samples with added noise."
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following hyperparameters is related to the minimum number of samples required to split a node?",
                    options: [
                        "n_estimators",
                        "max_depth",
                        "max_features",
                        "min_samples_split"
                    ],
                    answer: "D"
                },
                {
                    question: "Random Forest is a special case of ensemble learning that primarily uses what as its base models?",
                    options: [
                        "Support Vector Machines",
                        "Logistic Regression",
                        "Decision Trees",
                        "Neural Networks"
                    ],
                    answer: "C"
                }
            ],
            "6": [
                {
                    question: "What does cluster analysis aim to do?",
                    options: [
                        "Increase dataset size",
                        "Find similar groups of objects",
                        "Classify data using labels",
                        "Remove outliers"
                    ],
                    answer: "B"
                },
                {
                    question: "In cluster analysis, intra-cluster distances are:",
                    options: [
                        "Maximized",
                        "Minized",
                        "Ignored",
                        "Equal"
                    ],
                    answer: "B"
                },
                {
                    question: "Which is an application of cluster analysis?",
                    options: [
                        "Grouping related documents",
                        "Sorting names alphabetically",
                        "Querying a database",
                        "Assigning class labels"
                    ],
                    answer: "A"
                },
                {
                    question: "Which of the following is NOT cluster analysis?",
                    options: [
                        "Supervised classification",
                        "Clustering genes",
                        "Clustering stocks",
                        "Clustering documents"
                    ],
                    answer: "A"
                },
                {
                    question: "How can the notion of a cluster sometimes be?",
                    options: [
                        "Always fixed",
                        "Ambiguous",
                        "Useless",
                        "Unsupervised only"
                    ],
                    answer: "B"
                },
                {
                    question: "Partitional clustering means:",
                    options: [
                        "Each object belongs to one subset only",
                        "Objects belong to multiple clusters",
                        "Clusters are nested as a tree",
                        "Clusters are random"
                    ],
                    answer: "A"
                },
                {
                    question: "Hierarchical clustering produces:",
                    options: [
                        "Flat clusters",
                        "Nested clusters as a tree",
                        "Single cluster only",
                        "Random divisions"
                    ],
                    answer: "B"
                },
                {
                    question: "In non-exclusive clustering:",
                    options: [
                        "A point belongs to one cluster only",
                        "A point can belong to multiple clusters",
                        "Clusters never overlap",
                        "Clusters are always fuzzy"
                    ],
                    answer: "B"
                },
                {
                    question: "In fuzzy clustering:",
                    options: [
                        "Weights for each point sum to 1",
                        "Points belong to only one cluster",
                        "Clusters are always hierarchical",
                        "Clusters are always random"
                    ],
                    answer: "A"
                },
                {
                    question: "Which algorithm is a clustering method?",
                    options: [
                        "K-means",
                        "Decision Tree",
                        "SVM",
                        "Naïve Bayes"
                    ],
                    answer: "A"
                },
                {
                    question: "In K-means clustering, each cluster is associated with:",
                    options: [
                        "A label",
                        "A centroid",
                        "A tree",
                        "A distance matrix"
                    ],
                    answer: "B"
                },
                {
                    question: "In K-means, each point is assigned to the cluster with the:",
                    options: [
                        "Random center",
                        "Farthest centroid",
                        "Closest centroid",
                        "Smallest weight"
                    ],
                    answer: "C"
                },
                {
                    question: "The number of clusters (K) in K-means must be:",
                    options: [
                        "Random",
                        "Specified in advance",
                        "Calculated automatically",
                        "Always equal to 2"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the first step of the K-means algorithm?",
                    options: [
                        "Assigning points",
                        "Randomly choosing centroids",
                        "Computing distances",
                        "Updating clusters"
                    ],
                    answer: "B"
                },
                {
                    question: "In the K-means example, the algorithm stops when:",
                    options: [
                        "Centroids keep moving",
                        "There is no change in clusters",
                        "Number of points decreases",
                        "K changes"
                    ],
                    answer: "B"
                },
                {
                    question: "The centroid in K-means is usually:",
                    options: [
                        "The median",
                        "The mean of points",
                        "A random point",
                        "The farthest point"
                    ],
                    answer: "B"
                },
                {
                    question: "Which distance is commonly used in K-means?",
                    options: [
                        "Euclidean distance",
                        "Hamming distance",
                        "Jaccard distance",
                        "Edit distance"
                    ],
                    answer: "A"
                },
                {
                    question: "The complexity of K-means is:",
                    options: [
                        "O(n + K + I + d)",
                        "O(n * K * I * d)",
                        "O(n/K)",
                        "O(n²)"
                    ],
                    answer: "B"
                },
                {
                    question: "Most convergence in K-means happens in:",
                    options: [
                        "Early iterations",
                        "Middle iterations",
                        "Last iteration only",
                        "Never"
                    ],
                    answer: "A"
                },
                {
                    question: "What is the most common measure to evaluate K-means clusters?",
                    options: [
                        "Accuracy",
                        "Sum of Squared Error (SSE)",
                        "Recall",
                        "Gini Index"
                    ],
                    answer: "B"
                },
                {
                    question: "Which is a solution to the initial centroid problem in K-means?",
                    options: [
                        "Use only one run",
                        "Multiple runs",
                        "Ignore centroids",
                        "Remove K"
                    ],
                    answer: "B"
                },
                {
                    question: "Bisecting K-means is a variant of:",
                    options: [
                        "Regression",
                        "K-means",
                        "Decision trees",
                        "Classification"
                    ],
                    answer: "B"
                },
                {
                    question: "Strength of hierarchical clustering is that:",
                    options: [
                        "Number of clusters must be fixed",
                        "No assumption of cluster number",
                        "It is always supervised",
                        "It removes noise completely"
                    ],
                    answer: "B"
                },
                {
                    question: "Agglomerative clustering starts with:",
                    options: [
                        "All points in one cluster",
                        "Each point as a separate cluster",
                        "Random clusters",
                        "Predefined labels"
                    ],
                    answer: "B"
                },
                {
                    question: "Divisive clustering starts with:",
                    options: [
                        "One all-inclusive cluster",
                        "Each point as a cluster",
                        "No clusters",
                        "Random assignment"
                    ],
                    answer: "A"
                },
                {
                    question: "The main operation in agglomerative clustering is:",
                    options: [
                        "Splitting clusters",
                        "Merging the closest clusters",
                        "Random assignment",
                        "Labeling data"
                    ],
                    answer: "B"
                },
                {
                    question: "To merge clusters, agglomerative algorithms use:",
                    options: [
                        "Distance or similarity matrix",
                        "Class labels",
                        "Random choices",
                        "Probabilities only"
                    ],
                    answer: "A"
                },
                {
                    question: "Single link distance is defined as:",
                    options: [
                        "The average distance",
                        "The minimum distance between clusters",
                        "The maximum distance",
                        "The centroid distance"
                    ],
                    answer: "B"
                },
                {
                    question: "Complete link distance is defined as:",
                    options: [
                        "The minimum distance",
                        "The average distance",
                        "The maximum distance between clusters",
                        "The random distance"
                    ],
                    answer: "C"
                },
                {
                    question: "Average link distance is defined as:",
                    options: [
                        "Average distance between all points in clusters",
                        "Minimum distance only",
                        "Maximum distance only",
                        "Centroid distance only"
                    ],
                    answer: "A"
                },
                {
                    question: "Ward's method is based on:",
                    options: [
                        "Squared error",
                        "Entropy",
                        "Variance reduction",
                        "Random selection"
                    ],
                    answer: "A"
                },
                {
                    question: "Agglomerative clustering stops when:",
                    options: [
                        "Each point is separate",
                        "Only one cluster remains",
                        "K is infinite",
                        "Random condition"
                    ],
                    answer: "B"
                },
                {
                    question: "In the dendrogram example, clusters are merged step by step until:",
                    options: [
                        "Half the data is used",
                        "All objects are in one cluster",
                        "Labels are assigned",
                        "Random grouping happens"
                    ],
                    answer: "B"
                },
                {
                    question: "A dendrogram represents:",
                    options: [
                        "Sequence of merges or splits",
                        "Random assignment of points",
                        "Distance only",
                        "Outliers only"
                    ],
                    answer: "A"
                },
                {
                    question: "Which clustering method can be both partitional and hierarchical?",
                    options: [
                        "Standard K-means",
                        "Bisecting K-means",
                        "Divisive",
                        "Single-link"
                    ],
                    answer: "B"
                }
            ],
            "7": [
                {
                    question: "What is a type of clustering in which each data object belongs only into one cluster?",
                    options: [
                        "Exclusive clustering.",
                        "Heterogeneous clustering.",
                        "Hierarchical clustering.",
                        "Partitional clustering."
                    ],
                    answer: "D"
                },
                {
                    question: "K-means is a clustering algorithm where it follows ________ approach.",
                    options: [
                        "Hierarchical clustering.",
                        "Partitional clustering.",
                        "All of them.",
                        "None of them."
                    ],
                    answer: "B"
                },
                {
                    question: "Centroid in k-means refers to ________.",
                    options: [
                        "data point within cluster.",
                        "the mean of all data points that belong to that cluster.",
                        "distance between clusters.",
                        "None of them."
                    ],
                    answer: "B"
                },
                {
                    question: "Technique used to represent distances or similarities between data points within dataset.",
                    options: [
                        "Confusion matrix",
                        "Proximity matrix.",
                        "Correlation matrix.",
                        "Variance matrix."
                    ],
                    answer: "B"
                },
                {
                    question: "We can calculate the distance between different cluster by using ________.",
                    options: [
                        "Min (single link).",
                        "Max (complete link).",
                        "None of them.",
                        "All of them."
                    ],
                    answer: "D"
                },
                {
                    question: "What does DBSCAN stand for?",
                    options: [
                        "Density-Based Spatial Clustering of Applications with Noise",
                        "Distance-Based Spatial Clustering of Applications with Noise",
                        "Data-Based Spatial Classification of Applications with Numbers",
                        "Density-Based Similarity Clustering of Applied Networks"
                    ],
                    answer: "A"
                },
                {
                    question: "Which parameter specifies the minimum number of points to form a dense region?",
                    options: [
                        "minPts",
                        "ε",
                        "maxPts",
                        "density"
                    ],
                    answer: "A"
                },
                {
                    question: "Which of the following is NOT a type of point in DBSCAN?",
                    options: [
                        "Core point",
                        "Border point",
                        "Noise point",
                        "Centroid point"
                    ],
                    answer: "D"
                },
                {
                    question: "Which clustering algorithm requires the number of clusters in advance?",
                    options: [
                        "DBSCAN",
                        "K-Means",
                        "Agglomerative",
                        "OPTICS"
                    ],
                    answer: "B"
                },
                {
                    question: "Density-reachability means.",
                    options: [
                        "A point is within ε of another point",
                        "A chain of core points connects two points",
                        "Points have the same density",
                        "Both points are centroids"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is an advantage of DBSCAN?",
                    options: [
                        "Detects clusters of arbitrary shape",
                        "Always produces the same results",
                        "Works well with any density",
                        "Requires number of clusters upfront"
                    ],
                    answer: "A"
                },
                {
                    question: "Which of these is a limitation of DBSCAN?",
                    options: [
                        "Identifies outliers automatically",
                        "Sensitive to parameter choice",
                        "Does not require number of clusters",
                        "Finds arbitrary shapes"
                    ],
                    answer: "B"
                },
                {
                    question: "What happens to points that are not density-reachable?",
                    options: [
                        "Marked as border points",
                        "Marked as core points",
                        "Marked as noise",
                        "Ignored completely"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the first step in the DBSCAN algorithm?",
                    options: [
                        "Mark all points as noise",
                        "Find all core points",
                        "Start with an arbitrary unvisited point",
                        "Calculate the distance between every pair of points"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is a key limitation of DBSCAN?",
                    options: [
                        "It cannot find non-linear clusters.",
                        "It requires the number of clusters.",
                        "It struggles with clusters of varying density.",
                        "It cannot handle categorical data."
                    ],
                    answer: "C"
                },
                {
                    question: "Which of these is a major application area for density-based clustering?",
                    options: [
                        "Market basket analysis",
                        "Image segmentation",
                        "Dimensionality reduction",
                        "Collaborative filtering"
                    ],
                    answer: "B"
                },
                {
                    question: "In hierarchical clustering, which linkage method measures the distance between the closest members of two clusters?",
                    options: [
                        "Single Linkage",
                        "Complete Linkage",
                        "Average Linkage",
                        "Centroid Linkage"
                    ],
                    answer: "A"
                },
                {
                    question: "What is the primary data structure used to visualize the results of a hierarchical clustering algorithm?",
                    options: [
                        "Scatter plot",
                        "Box plot",
                        "Dendrogram",
                        "Histogram"
                    ],
                    answer: "C"
                },
                {
                    question: "Clustering (cluster analysis) is machine learning technique that groups related (similar) unlabeled objects together and keep them separated from other different objects.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Inter-cluster distances are distances among objects within cluster.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Intra-cluster distances are distances among clusters within data.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "In simple k-means, we don't have to specify number of clusters in advance.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "K-means algorithm allocates data points to the nearest centroids and those centroids change every iteration.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "One of the most common problems of k-means is the sensitivity to outliers.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                }
            ],
            "8": [
                {
                    question: "What is the primary goal of a Support Vector Machine (SVM)?",
                    options: [
                        "To maximize the number of correctly classified points",
                        "To maximize the margin between the closest points of different classes",
                        "To minimize the number of support vectors",
                        "To find the simplest decision boundary without regard to margin."
                    ],
                    answer: "B"
                },
                {
                    question: "In SVM, what are the data points that lie closest to the decision boundary called?",
                    options: [
                        "Margin points",
                        "Hyper points",
                        "Support Vectors",
                        "Closest points"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the primary use case for Support Vector Machines (SVMs)?",
                    options: [
                        "Clustering unlabeled data",
                        "Dimensionality reduction",
                        "Binary classification problems",
                        "Reinforcement learning tasks"
                    ],
                    answer: "C"
                },
                {
                    question: "What is a key advantage of the SVM's dependence on support vectors?",
                    options: [
                        "It makes the model highly interpretable.",
                        "It provides direct probability estimates.",
                        "It makes the model memory efficient.",
                        "It eliminates the need for parameter tuning."
                    ],
                    answer: "C"
                },
                {
                    question: "A Hard Margin SVM has what major limitation?",
                    options: [
                        "It is too slow to train on large datasets.",
                        "It requires perfectly linearly separable data.",
                        "It cannot handle high-dimensional spaces.",
                        "It is highly insensitive to outliers."
                    ],
                    answer: "B"
                },
                {
                    question: "Why are SVMs particularly effective in high-dimensional spaces?",
                    options: [
                        "They automatically perform feature selection.",
                        "They are not affected by the curse of dimensionality.",
                        "They perform well even when dimensions exceed samples.",
                        "They require less data in high-dimensional settings."
                    ],
                    answer: "C"
                },
                {
                    question: "The \"kernel trick\" in SVMs allows the algorithm to:",
                    options: [
                        "Run significantly faster on any dataset.",
                        "Work with non-linearly separable data by transforming it to a higher dimension.",
                        "Automatically select the best hyperparameters.",
                        "Handle missing data effectively."
                    ],
                    answer: "B"
                },
                {
                    question: "Which kernel function is most suitable for complex, non-linear decision boundaries?",
                    options: [
                        "Linear Kernel",
                        "Polynomial Kernel",
                        "RBF (Gaussian) Kernel",
                        "Sigmoid Kernel"
                    ],
                    answer: "C"
                },
                {
                    question: "A major computational advantage of using kernel functions is:",
                    options: [
                        "They automatically scale all the input features.",
                        "They compute transformations implicitly without creating the high-dimensional space.",
                        "They reduce the number of support vectors needed.",
                        "They eliminate the need for a test set."
                    ],
                    answer: "B"
                },
                {
                    question: "Why are SVMs particularly effective in high-dimensional spaces?",
                    options: [
                        "They automatically perform feature selection.",
                        "They are not affected by the curse of dimensionality.",
                        "They perform well even when dimensions exceed samples.",
                        "They require less data in high-dimensional settings."
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is a noted disadvantage of SVMs?",
                    options: [
                        "Poor performance on small datasets",
                        "Inability to handle binary classification",
                        "Computational complexity and poor scaling with large datasets",
                        "Low accuracy compared to other algorithms"
                    ],
                    answer: "C"
                },
                {
                    question: "For an SVM model to perform effectively, it often requires:",
                    options: [
                        "Categorical features to be one-hot encoded.",
                        "Features to be carefully scaled.",
                        "A balanced ratio of classes.",
                        "A large number of missing values."
                    ],
                    answer: "B"
                },
                {
                    question: "The Gaussian RBF kernel depends on parameter:",
                    options: [
                        "C only",
                        "γ (gamma)",
                        "λ (lambda)",
                        "α (alpha)"
                    ],
                    answer: "B"
                },
                {
                    question: "In finance, an SVM can be used for which of the following tasks?",
                    options: [
                        "Setting interest rates for central banks",
                        "Detecting fraudulent credit card transactions",
                        "Conducting international currency exchanges",
                        "Drafting financial regulations"
                    ],
                    answer: "B"
                },
                {
                    question: "How does a larger margin in an SVM model typically affect its performance?",
                    options: [
                        "It leads to better generalization to unseen data.",
                        "It causes the model to overfit the training data.",
                        "It makes the model more sensitive to outliers.",
                        "It increases the number of support vectors."
                    ],
                    answer: "A"
                },
                {
                    question: "Moving a support vector after the model is trained would likely:",
                    options: [
                        "Have no effect on the model's predictions.",
                        "Change the position of the decision hyperplane.",
                        "Only affect the value of the 'C' parameter.",
                        "Improve the model's accuracy."
                    ],
                    answer: "B"
                },
                {
                    question: "What is a key theoretical strength of the SVM algorithm?",
                    options: [
                        "It requires no mathematical foundation to implement.",
                        "It has a strong mathematical and statistical learning foundation.",
                        "It always converges to a global optimum without iteration.",
                        "It is inherently resistant to all forms of overfitting."
                    ],
                    answer: "B"
                },
                {
                    question: "Which of these is NOT a common kernel function for SVMs?",
                    options: [
                        "Linear",
                        "Polynomial",
                        "RBF (Gaussian)",
                        "Fibonacci"
                    ],
                    answer: "D"
                },
                {
                    question: "A very small value of C usually leads to:",
                    options: [
                        "Hard margin",
                        "Softer margin (tolerates more errors)",
                        "Overfitting",
                        "Infinite support vectors"
                    ],
                    answer: "B"
                },
                {
                    question: "Why is the Soft Margin SVM more widely used in practice than the Hard Margin SVM?",
                    options: [
                        "It is faster to compute.",
                        "It requires less data.",
                        "It is more flexible and robust to noisy, non-separable data.",
                        "It provides more interpretable results."
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following statements is not true about SVM?",
                    options: [
                        "It is memory efficient",
                        "It can address a large number of predictor variables",
                        "It is versatile",
                        "It doesn't require feature scaling"
                    ],
                    answer: "D"
                },
                {
                    question: "Which of the following statements is not true about SVM?",
                    options: [
                        "It has regularization capabilities",
                        "It handles non-linear data efficiently",
                        "It has much improved stability",
                        "Choosing an appropriate kernel function is easy"
                    ],
                    answer: "D"
                },
                {
                    question: "The margin in an SVM is defined as:",
                    options: [
                        "The distance between the hyperplane and the farthest point.",
                        "The distance between the hyperplane and the closest data point.",
                        "The difference between true and predicted labels.",
                        "The width of the bias parameter."
                    ],
                    answer: "B"
                },
                {
                    question: "Why do we prefer the maximum margin classifier?",
                    options: [
                        "It increases the number of support vectors.",
                        "It maximizes classification errors.",
                        "It reduces sensitivity to boundary shifts and improves generalization.",
                        "It avoids quadratic programming."
                    ],
                    answer: "C"
                },
                {
                    question: "The decision boundary of an SVM is determined by:",
                    options: [
                        "All training points",
                        "Randomly selected points",
                        "Only the support vectors",
                        "Outliers only"
                    ],
                    answer: "C"
                },
                {
                    question: "The kernel trick in SVMs allows:",
                    options: [
                        "Explicitly computing features in higher dimensions",
                        "Avoiding explicit feature transformation by using dot products in feature space",
                        "Reducing the dataset size",
                        "Eliminating support vectors"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is NOT a standard kernel used in SVMs?",
                    options: [
                        "Polynomial kernel",
                        "Gaussian (RBF) kernel",
                        "Sigmoid kernel",
                        "Fourier kernel"
                    ],
                    answer: "D"
                },
                {
                    question: "In SVM, parameter C controls:",
                    options: [
                        "The feature transformation",
                        "Tradeoff between maximizing margin and minimizing training errors",
                        "Kernel dimensionality",
                        "Optimization speed"
                    ],
                    answer: "B"
                },
                {
                    question: "Which benchmark is SVM famously good at?",
                    options: [
                        "Graph partitioning",
                        "Handwritten digit recognition",
                        "Genetic algorithms",
                        "Clustering text data"
                    ],
                    answer: "B"
                },
                {
                    question: "SVM is derived from:",
                    options: [
                        "Neural networks",
                        "Decision trees",
                        "Statistical learning theory",
                        "Genetic algorithms"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is true about linear SVMs?",
                    options: [
                        "They always misclassify data",
                        "They separate data using a hyperplane",
                        "They are unsuitable for binary classification",
                        "They only work for categorical features"
                    ],
                    answer: "B"
                },
                {
                    question: "Why maximize margin?",
                    options: [
                        "To increase errors",
                        "To improve generalization and robustness",
                        "To reduce number of features",
                        "To avoid quadratic optimization"
                    ],
                    answer: "B"
                },
                {
                    question: "Support vectors are:",
                    options: [
                        "Points farthest from the boundary",
                        "Points that lie on the margin boundaries",
                        "Random samples from dataset",
                        "Outliers only"
                    ],
                    answer: "B"
                },
                {
                    question: "Removing a non-support vector from the training set:",
                    options: [
                        "Changes the decision boundary",
                        "Does not affect the decision boundary",
                        "Doubles the margin",
                        "Eliminates kernels"
                    ],
                    answer: "B"
                },
                {
                    question: "SVM optimization is usually solved using:",
                    options: [
                        "Linear regression",
                        "Decision trees",
                        "Quadratic Programming (QP)",
                        "Random sampling"
                    ],
                    answer: "C"
                }
            ],
            "9": [
                {
                    question: "Which type of learning learns through rewards and punishments?",
                    options: [
                        "Supervised Learning",
                        "Unsupervised Learning",
                        "Reinforcement Learning",
                        "Deep Learning"
                    ],
                    answer: "C"
                },
                {
                    question: "In Reinforcement Learning, the Agent interacts with:",
                    options: [
                        "A Database",
                        "The Environment",
                        "A Teacher",
                        "A Pre-trained Neural Network"
                    ],
                    answer: "B"
                },
                {
                    question: "In chess, when does the player receive the reward?",
                    options: [
                        "After every move",
                        "After every point",
                        "At the end of the game",
                        "Only when losing"
                    ],
                    answer: "C"
                },
                {
                    question: "An example of a Negative Reward is:",
                    options: [
                        "Winning a match",
                        "Getting food",
                        "Feeling hunger or pain",
                        "Scoring a goal"
                    ],
                    answer: "C"
                },
                {
                    question: "Which term refers to \"the plan that determines which action the agent should take in each state\"?",
                    options: [
                        "State",
                        "Reward",
                        "Policy",
                        "Environment"
                    ],
                    answer: "C"
                },
                {
                    question: "The goal of the Optimal Policy is:",
                    options: [
                        "Reducing the number of states",
                        "Maximizing long-term rewards",
                        "Reducing the learning rate",
                        "Making rewards always positive"
                    ],
                    answer: "B"
                },
                {
                    question: "If γ (discount factor) is close to 1, this means:",
                    options: [
                        "Immediate rewards are much more important than distant ones",
                        "Future rewards are considered as important as current ones",
                        "All future rewards are ignored",
                        "No learning takes place"
                    ],
                    answer: "B"
                },
                {
                    question: "Exploration means:",
                    options: [
                        "Always choosing the action with the highest current reward",
                        "Trying new actions that may be better in the future",
                        "Stopping the learning process",
                        "Ignoring rewards"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a practical example of Reinforcement Learning?",
                    options: [
                        "PageRank algorithm",
                        "A program that plays \"Go\" and improves over time",
                        "Clustering images by colors",
                        "A neural network recognizing handwriting"
                    ],
                    answer: "B"
                },
                {
                    question: "The difference between Q-Learning and other methods is that it:",
                    options: [
                        "Requires the full environment model",
                        "Learns values of (state, action) pairs",
                        "Does not use any rewards",
                        "Is always faster than TD"
                    ],
                    answer: "B"
                },
                {
                    question: "Exploitation means:",
                    options: [
                        "Trying something new",
                        "Choosing the action with the highest current value",
                        "Ignoring rewards",
                        "Reducing the learning rate"
                    ],
                    answer: "B"
                },
                {
                    question: "One challenge in Active Learning is:",
                    options: [
                        "The difficulty of coding",
                        "The trade-off between exploration and exploitation",
                        "Lack of data",
                        "Lack of environment"
                    ],
                    answer: "B"
                },
                {
                    question: "The goal of \"Optimistic rewards\" in exploration is:",
                    options: [
                        "Encouraging the agent to try less-frequented actions",
                        "Making the policy fixed",
                        "Increasing the learning rate",
                        "Ignoring negative states"
                    ],
                    answer: "A"
                },
                {
                    question: "One of the early applications of RL:",
                    options: [
                        "IBM's Checkers program",
                        "ChatGPT",
                        "Internet search algorithms",
                        "Social networks"
                    ],
                    answer: "A"
                },
                {
                    question: "Which element in RL represents the \"current situation\" of the agent?",
                    options: [
                        "Action",
                        "State",
                        "Reward",
                        "Policy"
                    ],
                    answer: "B"
                },
                {
                    question: "When the agent takes an action, it:",
                    options: [
                        "Always stays in the same state",
                        "Moves to a new state and receives a reward",
                        "Stops learning",
                        "Nothing changes"
                    ],
                    answer: "B"
                },
                {
                    question: "What happens if the agent ignores rewards completely?",
                    options: [
                        "Learns faster",
                        "Does not learn a correct policy",
                        "Reaches the goal quickly",
                        "Increases the discount factor"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is NOT an example of an RL environment?",
                    options: [
                        "Chess game",
                        "A robot learning to walk",
                        "A static database with labeled answers",
                        "Self-driving car"
                    ],
                    answer: "C"
                },
                {
                    question: "The Learning Rate (α) controls:",
                    options: [
                        "How fast the values are updated",
                        "The total number of states",
                        "The environment size",
                        "The type of optimal policy"
                    ],
                    answer: "A"
                },
                {
                    question: "In Passive Learning, the Policy is:",
                    options: [
                        "Changes with every trial",
                        "Fixed and predefined",
                        "Ignored completely",
                        "Depends only on Q-values"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following shows the benefit of Exploration?",
                    options: [
                        "Increases chances of discovering better policies",
                        "Reduces learning speed",
                        "Prevents receiving rewards",
                        "Eliminates the need for negative rewards"
                    ],
                    answer: "A"
                },
                {
                    question: "In the \"walking robot\" example, why does the robot get a penalty if it falls?",
                    options: [
                        "To encourage it to keep falling",
                        "To prevent trying new actions",
                        "To teach it to avoid wrong actions",
                        "To increase the discount factor"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following reflects \"learning by trial and error\"?",
                    options: [
                        "Agent learns from labeled datasets",
                        "Agent tries actions and observes results and rewards",
                        "Agent ignores actions and uses a pre-trained model",
                        "Agent memorizes a database without testing"
                    ],
                    answer: "B"
                },
                {
                    question: "If the environment changes over time, the agent should:",
                    options: [
                        "Stop learning",
                        "Adapt its policy and adjust",
                        "Keep the same old policy",
                        "Ignore new rewards"
                    ],
                    answer: "B"
                },
                {
                    question: "Why is a small penalty given for each step in some environments?",
                    options: [
                        "To encourage the agent to take longer paths",
                        "To push the agent to reach the goal faster",
                        "To reduce the number of states",
                        "To make the policy random"
                    ],
                    answer: "B"
                },
                {
                    question: "In Passive Learning, the agent:",
                    options: [
                        "Learns the optimal policy itself",
                        "Follows a fixed policy and learns values accordingly",
                        "Does not use any policy",
                        "Relies only on random actions"
                    ],
                    answer: "B"
                },
                {
                    question: "The discount factor (γ) defines:",
                    options: [
                        "Speed of updating values",
                        "The importance of future rewards",
                        "Number of possible actions",
                        "The optimal policy directly"
                    ],
                    answer: "B"
                },
                {
                    question: "Exploitation means:",
                    options: [
                        "Trying new actions",
                        "Choosing the action with the highest current value",
                        "Ignoring rewards",
                        "Making the policy random"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following shows that the environment may be \"non-stationary\"?",
                    options: [
                        "Rewards change over time",
                        "The policy always stays the same",
                        "The agent stops learning",
                        "Rewards are always positive"
                    ],
                    answer: "A"
                },
                {
                    question: "What is the benefit of \"trial and error\" in RL?",
                    options: [
                        "Allows the agent to discover which action is actually best",
                        "Reduces the number of states",
                        "Avoids exploration",
                        "Eliminates the role of policy"
                    ],
                    answer: "A"
                },
                {
                    question: "Why is Q-Learning useful in complex environments?",
                    options: [
                        "Because it does not require the transition model",
                        "Because it ignores rewards",
                        "Because it depends only on states",
                        "Because it uses supervised data"
                    ],
                    answer: "A"
                },
                {
                    question: "In summary, RL helps the agent to:",
                    options: [
                        "Always take random actions",
                        "Build an optimal policy linking states to actions",
                        "Ignore the future and focus only on the present",
                        "Learn without any rewards"
                    ],
                    answer: "B"
                },
                {
                    question: "Which element represents \"the action the agent takes in the environment\"?",
                    options: [
                        "State",
                        "Action",
                        "Reward",
                        "Policy"
                    ],
                    answer: "B"
                },
                {
                    question: "The Optimal Policy means:",
                    options: [
                        "A random plan",
                        "A plan that maximizes long-term rewards",
                        "A fixed unchanging plan",
                        "A plan that reduces the number of states"
                    ],
                    answer: "B"
                },
                {
                    question: "What makes RL different from Supervised Learning?",
                    options: [
                        "Relies on labeled data",
                        "Relies on trial and rewards",
                        "Relies on pre-collected datasets",
                        "Relies on direct classification"
                    ],
                    answer: "B"
                },
                {
                    question: "A disadvantage of only using Exploitation is:",
                    options: [
                        "It may prevent discovering better solutions",
                        "It always leads to faster learning",
                        "It does not need rewards",
                        "It makes the environment random"
                    ],
                    answer: "A"
                },
                {
                    question: "Continuous exploration without exploitation leads to:",
                    options: [
                        "Not benefiting from acquired knowledge",
                        "Always reaching the optimal policy",
                        "Ignoring the environment",
                        "Faster learning"
                    ],
                    answer: "A"
                },
                {
                    question: "One simple solution to the Exploration vs Exploitation problem is:",
                    options: [
                        "Making all actions equal",
                        "Choosing a random action sometimes",
                        "Ignoring exploration completely",
                        "Fixing the policy from the start"
                    ],
                    answer: "B"
                },
                {
                    question: "The ultimate goal of RL is:",
                    options: [
                        "Choosing random actions",
                        "Learning an optimal policy linking states to actions",
                        "Memorizing all states in memory",
                        "Ignoring future rewards"
                    ],
                    answer: "B"
                },
                {
                    question: "The Bellman Equation helps in:",
                    options: [
                        "Calculating optimal values of states",
                        "Ignoring the environment",
                        "Finding random actions",
                        "Eliminating rewards"
                    ],
                    answer: "A"
                }
            ],
            "10": [
                {
                    question: "What is the primary mechanism the Transformer model is based on, dispensing with recurrence and convolutions?",
                    options: [
                        "Recurrent Neural Networks",
                        "Convolutional Neural Networks",
                        "Attention Mechanisms",
                        "Gated Recurrent Units"
                    ],
                    answer: "C"
                },
                {
                    question: "Which of the following is NOT a benefit of the Transformer model compared to traditional recurrent or convolutional models?",
                    options: [
                        "Superior quality",
                        "More parallelizable",
                        "Significantly less training time",
                        "Increased sequential computation"
                    ],
                    answer: "D"
                },
                {
                    question: "The encoder in the Transformer architecture is composed of how many identical layers?",
                    options: [
                        "3",
                        "6",
                        "8",
                        "12"
                    ],
                    answer: "B"
                },
                {
                    question: "How many parallel attention layers (heads) were employed in the Transformer model described in the NIPS 2017 paper?",
                    options: [
                        "4",
                        "6",
                        "8",
                        "16"
                    ],
                    answer: "C"
                },
                {
                    question: "In the Transformer's encoder-decoder attention, where do the queries come from?",
                    options: [
                        "The output of the encoder",
                        "The previous decoder layer",
                        "The input sequence directly",
                        "A separate embedding layer"
                    ],
                    answer: "B"
                },
                {
                    question: "What is the main function of positional encodings in the Transformer model?",
                    options: [
                        "To reduce the dimensionality of the input",
                        "To provide information about the relative or absolute position of tokens",
                        "To replace the need for attention mechanisms",
                        "To normalize the input embeddings"
                    ],
                    answer: "B"
                },
                {
                    question: "The position-wise feed-forward networks in the Transformer consist of how many linear transformations?",
                    options: [
                        "One",
                        "Two",
                        "Three",
                        "Four"
                    ],
                    answer: "B"
                },
                {
                    question: "Which of the following is a key advantage of self-attention over recurrent layers in terms of computational complexity for long sequences?",
                    options: [
                        "Higher sequential operations",
                        "Longer maximum path length",
                        "Lower computational complexity per layer",
                        "Reduced interpretability"
                    ],
                    answer: "C"
                },
                {
                    question: "What regularization technique was applied to the output of each sub-layer in the Transformer before addition and normalization?",
                    options: [
                        "L1 Regularization",
                        "L2 Regularization",
                        "Dropout",
                        "Batch Normalization"
                    ],
                    answer: "C"
                },
                {
                    question: "What is the purpose of masking in the decoder's self-attention sub-layer?",
                    options: [
                        "To increase parallelization",
                        "To prevent positions from attending to subsequent positions",
                        "To reduce computational cost",
                        "To enhance the semantic meaning of tokens"
                    ],
                    answer: "B"
                }
            ],
            "true-false": [
                {
                    question: "Supervised learning requires labeled data.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Overfitting can be completely eliminated by increasing model size.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Cross-validation helps estimate how well a model generalizes.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Bias refers to the variance caused by noisy labels.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Regularization can help reduce overfitting.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Unsupervised learning always produces a single correct clustering for any dataset.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Feature engineering has little impact on model performance compared to model choice.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Stratified sampling keeps class proportions consistent between train and test splits.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "A model that perfectly fits training data will always perform perfectly on unseen data.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Principal Component Analysis (PCA) is used for dimensionality reduction.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Data cleaning is an unnecessary step in the machine learning pipeline.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Outliers are data points that deviate significantly from the dataset mean.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Box Plot Method uses the Interquartile Range (IQR) to identify outliers.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Binning is a technique to reduce noise in data by sorting it and partitioning it into equal-frequency bins.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Min-Max scaling transforms values to a specific range while changing the shape of the original distribution.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "One-Hot Encoding is used to convert numerical variables into a categorical format.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Dimensionality Reduction aims to reduce the number of features while preserving as much information as possible.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Principal Component Analysis (PCA) is a linear dimensionality reduction technique.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "t-SNE is a linear dimensionality reduction technique that preserves the global structure of data.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Supervised Learning learns from unlabeled data.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Regression is a subtype of Supervised Learning used to predict a continuous value.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Adding more independent variables to a regression model always improves generalizability.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "In Ordinary Least Squares (OLS), the error term is assumed to have a mean of zero.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Dummy variables are used to include categorical variables in regression models.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Adjusted R² always increases when new predictors are added to the model.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Interaction terms in regression represent the joint effect of two variables on the dependent variable.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Transformer model relies heavily on recurrent neural networks for sequence transduction.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Positional encodings are added to input embeddings in the Transformer to provide information about the order of the sequence.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Scaled Dot-Product Attention uses a scaling factor to prevent large dot products from pushing the softmax function into regions with small gradients.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Multi-Head Attention allows the model to attend to information from only one representation subspace at a time.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "The encoder in the Transformer architecture contains a third sub-layer for encoder-decoder attention.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Supervised Learning requires the presence of labeled data for training.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "In Unsupervised Learning, the data is not presented with specific labels.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Reinforcement Learning is used in tasks that involve making a sequence of decisions to achieve a goal.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Classification algorithms are suitable for predicting continuous numerical values.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "The primary goal of Regression algorithms is to predict a class label.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Clustering algorithms are used to group similar data points together into clusters.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Naive Bayes Classifier algorithm is suitable for solving classification problems.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Decision Trees algorithm is used in both classification and regression tasks.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Support Vector Machines (SVM) work by finding the optimal hyperplane that separates different classes of data.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Neural Networks are inspired by the structure of the human brain.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Linear Regression algorithms are used for predicting a numerical value.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The K-Means Clustering algorithm requires you to specify the number of clusters (k) beforehand.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Mean-shift Clustering is used to find cluster centers based on the density of data points.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "DBSCAN Clustering is suitable for discovering clusters with irregular shapes.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Agglomerative Hierarchical Clustering algorithm starts with each data point as its own cluster.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "The Random Forest algorithm is an ensemble of decision trees that work together.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Regression algorithms are used to predict whether an email is \"spam\" or \"not spam\".",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Classification algorithms are used to predict the price of a house based on its size and number of rooms.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "In Reinforcement Learning, the agent receives a reward or penalty based on its actions in the environment.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "A Random Forest is often more accurate than a single decision tree.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "A disadvantage of the Naive Bayes Classifier is its assumption that data features are independent of each other.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Neural Networks are primarily used for clustering tasks.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "DBSCAN algorithms do not require the number of clusters to be specified beforehand.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "Clustering is considered a type of Supervised Learning.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "Decision Trees can suffer from Overfitting if they are too deep.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "A"
                },
                {
                    question: "K-Means is an example of a Classification algorithm.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                },
                {
                    question: "In Neural Networks, the final layer that produces the output is known as the input layer.",
                    options: [
                        "True",
                        "False"
                    ],
                    answer: "B"
                }
            ]
        
        };

        // تعريف الإنجازات
        const achievements = [
            { id: 'first_test', name: 'أول اختبار', desc: 'أكمل أول اختبار', icon: '🏅', unlocked: false },
            { id: 'speed_demon', name: 'سريع كالبرق', desc: 'أكمل اختبار في أقل من 5 دقائق', icon: '⚡', unlocked: false },
            { id: 'high_accuracy', name: 'دقة عالية', desc: 'احصل على 90% أو أكثر', icon: '🎯', unlocked: false },
            { id: 'perfect_score', name: 'نتيجة مثالية', desc: 'احصل على 100% في اختبار', icon: '💯', unlocked: false },
            { id: 'marathon', name: 'ماراثون الأسئلة', desc: 'أكمل اختبار 100 سؤال', icon: '🏃', unlocked: false }
        ];

        // لوحة المتصدرين
        let leaderboardData = [];

        document.addEventListener('DOMContentLoaded', function() {
            // عناصر الواجهة
            const welcomeScreen = document.getElementById('welcome-screen');
            const lectureSelection = document.getElementById('lecture-selection');
            const customTestContainer = document.getElementById('custom-test-container');
            const examContainer = document.getElementById('exam-container');
            const testSettings = document.getElementById('test-settings');
            const startLecturesBtn = document.getElementById('start-lectures-btn');
            const createTestBtn = document.getElementById('create-test-btn');
            const backToWelcomeBtn = document.getElementById('back-to-welcome');
            const backToWelcomeBtn2 = document.getElementById('back-to-welcome-2');
            const questionCountInput = document.getElementById('question-count');
            const startCustomTestBtn = document.getElementById('start-custom-test');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const resetProgressBtn = document.getElementById('reset-progress');
            const showAchievementsBtn = document.getElementById('show-achievements');
            
            // عناصر القائمة الجانبية للأسئلة
            const questionsSidebar = document.getElementById('questions-sidebar');
            const questionsList = document.getElementById('questions-list');
            const toggleSidebarBtn = document.getElementById('toggle-sidebar');
            const examContent = document.getElementById('exam-content');
            
            // عناصر الواجهة الأصلية
            const lectureTitle = document.getElementById('lecture-title');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const progressPercentage = document.getElementById('progress-percentage');
            const questionText = document.getElementById('question-text');
            const currentNumber = document.getElementById('current-number');
            const optionsContainer = document.getElementById('options-container');
            const feedback = document.getElementById('feedback');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const returnBtn = document.getElementById('return-btn');
            const resultsContainer = document.getElementById('results-container');
            const scoreElement = document.getElementById('score');
            const scoreTextElement = document.getElementById('score-text');
            const correctAnswersElement = document.getElementById('correct-answers');
            const incorrectAnswersElement = document.getElementById('incorrect-answers');
            const timeTakenElement = document.getElementById('time-taken');
            const timerElement = document.getElementById('timer');
            const achievementsPanel = document.getElementById('achievements-panel');
            const achievementsGrid = document.getElementById('achievements-grid');
            const reviewPanel = document.getElementById('review-panel');
            const reviewQuestions = document.getElementById('review-questions');
            const retryIncorrectBtn = document.getElementById('retry-incorrect');
            const leaderboard = document.getElementById('leaderboard');
            const leaderboardList = document.getElementById('leaderboard-list');
            const qrCodeContainer = document.getElementById('qr-code-container');
            const qrCodeElement = document.getElementById('qr-code');
            const pdfExport = document.getElementById('pdf-export');
            const exportPdfBtn = document.getElementById('export-pdf');
            const shareResults = document.getElementById('share-results');
            const copyResultsBtn = document.getElementById('copy-results');
            const shareTwitterBtn = document.getElementById('share-twitter');
            const shareWhatsappBtn = document.getElementById('share-whatsapp');
            const backToLecturesBtn = document.getElementById('back-to-lectures');

            // أضف هذه المتغيرات مع بقية المتغيرات
            const aboutUsBtn = document.getElementById('about-us-btn');
            const aboutUsContainer = document.getElementById('about-us-container');
            const backFromAboutBtn = document.getElementById('back-from-about');
            const lectureCheckboxes = document.getElementById('lecture-checkboxes');
            const selectAllBtn = document.getElementById('select-all');
            const deselectAllBtn = document.getElementById('deselect-all');
            
            let currentLecture = null;
            let currentQuestions = [];
            let currentQuestionIndex = 0;
            let userAnswers = [];
            let score = 0;
            let answered = false;
            let startTime = null;
            let timerInterval = null;
            let isCustomTest = false;
            let testDuration = 30; // دقائق
            let countdownTime = testDuration * 60; // ثواني
            let immediateFeedback = true;
            let savedProgress = null;
            let sidebarVisible = true;


                        // تحديث التخطيط عند تغيير حجم النافذة
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    // على الشاشات الكبيرة، إظهار القائمة الجانبية بشكل طبيعي
                    questionsSidebar.style.display = 'block';
                    questionsSidebar.classList.remove('active');
                    examContent.classList.remove('full-width');
                    toggleSidebarBtn.textContent = '☰';
                    toggleSidebarBtn.style.position = 'fixed';
                    toggleSidebarBtn.style.top = '70px';
                    toggleSidebarBtn.style.right = '10px';
                    toggleSidebarBtn.style.bottom = 'auto';
                    toggleSidebarBtn.style.width = '40px';
                    toggleSidebarBtn.style.height = '40px';
                    toggleSidebarBtn.style.borderRadius = '5px';
                    toggleSidebarBtn.style.fontSize = '1.2rem';
                    sidebarVisible = true;
                } else {
                    // على الشاشات الصغيرة، إخفاء القائمة الجانبية افتراضياً
                    questionsSidebar.style.display = 'block'; // يجب أن تظل معروضة لكن مخفية بالتحويل
                    questionsSidebar.classList.remove('active');
                    toggleSidebarBtn.style.position = 'fixed';
                    toggleSidebarBtn.style.bottom = '20px';
                    toggleSidebarBtn.style.right = '20px';
                    toggleSidebarBtn.style.top = 'auto';
                    toggleSidebarBtn.style.width = '60px';
                    toggleSidebarBtn.style.height = '60px';
                    toggleSidebarBtn.style.borderRadius = '50%';
                    toggleSidebarBtn.style.fontSize = '1.5rem';
                    toggleSidebarBtn.textContent = '≡';
                    sidebarVisible = false;
                }
            });
            
            // تهيئة التطبيق
            function init() {
                loadProgress();
                loadLeaderboard();
                
                // تحميل إعدادات المستخدم
                const savedSettings = localStorage.getItem('mlTestSettings');
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    document.getElementById('countdown-timer').checked = settings.countdownTimer;
                    document.getElementById('test-duration').value = settings.testDuration;
                    
                    // تحديد نوع التصحيح
                    const feedbackType = settings.feedbackType || 'immediate';
                    document.querySelector(`input[name="feedback-type"][value="${feedbackType}"]`).checked = true;
                    
                    testDuration = settings.testDuration;
                    countdownTime = testDuration * 60;
                    immediateFeedback = feedbackType === 'immediate';
                }
                
                // التحقق من الوضع الليلي
                if (localStorage.getItem('darkMode') === 'enabled') {
                    document.body.classList.add('dark-mode');
                    darkModeToggle.textContent = 'الوضع النهاري';
                }

                // على الشاشات الصغيرة، إخفاء القائمة الجانبية افتراضياً
                if (window.innerWidth <= 768) {
                    questionsSidebar.classList.remove('active');
                    toggleSidebarBtn.textContent = '≡';
                    sidebarVisible = false;
                }
            }

            // دالة مساعدة للتحقق من حجم الشاشة
            function isMobileScreen() {
                return window.innerWidth <= 768;
            }
            
            // تحميل التقدم المحفوظ
            function loadProgress() {
                const progress = localStorage.getItem('mlTestProgress');
                if (progress) {
                    savedProgress = JSON.parse(progress);
                    // عرض رسالة استئناف إذا كان هناك تقدم محفوظ
                    if (savedProgress && savedProgress.currentQuestionIndex > 0) {
                        if (confirm('هناك اختبار غير مكتمل. هل تريد الاستئناف من حيث توقفت؟')) {
                            resumeTest();
                        }
                    }
                }
                
                // تحميل الإنجازات
                const savedAchievements = localStorage.getItem('mlTestAchievements');
                if (savedAchievements) {
                    const unlockedAchievements = JSON.parse(savedAchievements);
                    achievements.forEach(achievement => {
                        if (unlockedAchievements.includes(achievement.id)) {
                            achievement.unlocked = true;
                        }
                    });
                }
            }
            
            // إنشاء قائمة الأسئلة الجانبية
            function createQuestionsSidebar() {
                questionsList.innerHTML = '';
                
                currentQuestions.forEach((question, index) => {
                    const questionItem = document.createElement('div');
                    questionItem.className = 'question-item';
                    questionItem.textContent = index + 1;
                    questionItem.dataset.index = index;
                    
                    // تمييز السؤال الحالي
                    if (index === currentQuestionIndex) {
                        questionItem.classList.add('current');
                    }
                    
                    // تمييز الأسئلة التي تمت الإجابة عليها
                    if (userAnswers[index] !== null) {
                        const isCorrect = userAnswers[index] === question.answer;
                        questionItem.classList.add(isCorrect ? 'answered' : 'answered-incorrect');
                    }
                    
                    questionItem.addEventListener('click', function() {
                        navigateToQuestion(parseInt(this.dataset.index));
                        
                        // على الشاشات الصغيرة، إغلاق القائمة بعد اختيار سؤال
                        if (isMobileScreen()) {
                            questionsSidebar.classList.remove('active');
                            toggleSidebarBtn.textContent = '≡';
                            sidebarVisible = false;
                        }
                    });
                    
                    questionsList.appendChild(questionItem);
                });
            }
            
            // التنقل إلى سؤال معين
            function navigateToQuestion(index) {
                if (index >= 0 && index < currentQuestions.length) {
                    currentQuestionIndex = index;
                    loadQuestion();
                    updateProgress();
                    updateNavigation();
                    updateQuestionsSidebar();
                }
            }
            
            // تحديث القائمة الجانبية للأسئلة
            function updateQuestionsSidebar() {
                const questionItems = questionsList.querySelectorAll('.question-item');
                
                questionItems.forEach((item, index) => {
                    item.classList.remove('current');
                    
                    if (index === currentQuestionIndex) {
                        item.classList.add('current');
                    }
                    
                    // تحديث حالة الإجابة
                    if (userAnswers[index] !== null) {
                        const isCorrect = userAnswers[index] === currentQuestions[index].answer;
                        item.classList.remove('answered', 'answered-incorrect');
                        item.classList.add(isCorrect ? 'answered' : 'answered-incorrect');
                    }
                });
            }
            
            // إظهار/إخفاء القائمة الجانبية
                // إظهار/إخفاء القائمة الجانبية - مصحح للشاشات الصغيرة
            function toggleSidebar() {
                if (window.innerWidth <= 768) {
                    // على الشاشات الصغيرة: استخدام الكلاس active للتحكم بالظهور
                    questionsSidebar.classList.toggle('active');
                    toggleSidebarBtn.textContent = questionsSidebar.classList.contains('active') ? '✕' : '≡';
                    
                    // تحديث حالة المتغير
                    sidebarVisible = questionsSidebar.classList.contains('active');
                } else {
                    // على الشاشات الكبيرة: استخدام الطريقة الأصلية
                    sidebarVisible = !sidebarVisible;
                    
                    if (sidebarVisible) {
                        questionsSidebar.style.display = 'block';
                        examContent.classList.remove('full-width');
                        toggleSidebarBtn.textContent = '☰';
                    } else {
                        questionsSidebar.style.display = 'none';
                        examContent.classList.add('full-width');
                        toggleSidebarBtn.textContent = '☰';
                    }
                }
            }
            
            // استئناف الاختبار
            function resumeTest() {
                if (!savedProgress) return;
                
                currentLecture = savedProgress.currentLecture;
                currentQuestions = savedProgress.currentQuestions;
                currentQuestionIndex = savedProgress.currentQuestionIndex;
                userAnswers = savedProgress.userAnswers;
                score = savedProgress.score;
                startTime = new Date(savedProgress.startTime);
                
                if (savedProgress.isCustomTest) {
                    isCustomTest = true;
                    lectureTitle.textContent = `اختبار عشوائي (${currentQuestions.length} أسئلة)`;
                    customTestContainer.style.display = 'none';
                } else {
                    lectureTitle.textContent = currentLecture === 'true-false' ? 
                        'أسئلة صحيح/خطأ' : `المحاضرة ${currentLecture}`;
                    lectureSelection.style.display = 'none';
                }
                
                examContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
                
                // استئناف المؤقت
                const now = new Date();
                const elapsedSeconds = Math.floor((now - startTime) / 1000);
                countdownTime = testDuration * 60 - elapsedSeconds;
                
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000);
                updateTimer();
                
                // إنشاء القائمة الجانبية
                createQuestionsSidebar();
                
                loadQuestion();
                updateProgress();
                updateNavigation();
            }
            
            // حفظ التقدم
            function saveProgress() {
                const progress = {
                    currentLecture: currentLecture,
                    currentQuestions: currentQuestions,
                    currentQuestionIndex: currentQuestionIndex,
                    userAnswers: userAnswers,
                    score: score,
                    startTime: startTime,
                    isCustomTest: isCustomTest
                };
                
                localStorage.setItem('mlTestProgress', JSON.stringify(progress));
            }
            
            // حفظ الإعدادات
            function saveSettings() {
                const settings = {
                    countdownTimer: document.getElementById('countdown-timer').checked,
                    testDuration: parseInt(document.getElementById('test-duration').value),
                    feedbackType: document.querySelector('input[name="feedback-type"]:checked').value
                };
                
                localStorage.setItem('mlTestSettings', JSON.stringify(settings));
                
                // تحديث المتغيرات
                testDuration = settings.testDuration;
                countdownTime = testDuration * 60;
                immediateFeedback = settings.feedbackType === 'immediate';
            }
            
            // تفعيل إنجاز
            function unlockAchievement(achievementId) {
                const achievement = achievements.find(a => a.id === achievementId);
                if (achievement && !achievement.unlocked) {
                    achievement.unlocked = true;
                    
                    // حفظ الإنجازات
                    const unlockedIds = achievements.filter(a => a.unlocked).map(a => a.id);
                    localStorage.setItem('mlTestAchievements', JSON.stringify(unlockedIds));
                    
                    // عرض إشعار
                    showNotification(`إنجاز مفتوح: ${achievement.name} - ${achievement.desc}`);
                    
                    return true;
                }
                return false;
            }
            
            // عرض إشعار
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                    z-index: 10000;
                    animation: slideIn 0.5s ease;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
            
            // تحديث المؤقت
            function updateTimer() {
                if (document.getElementById('countdown-timer').checked) {
                    // مؤقت تنازلي
                    const minutes = Math.floor(countdownTime / 60);
                    const seconds = countdownTime % 60;
                    
                    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (countdownTime <= 300) { // 5 دقائق أو أقل
                        timerElement.classList.add('warning');
                    } else {
                        timerElement.classList.remove('warning');
                    }
                    
                    if (countdownTime <= 0) {
                        clearInterval(timerInterval);
                        showResults();
                    } else {
                        countdownTime--;
                    }
                } else {
                    // مؤقت تصاعدي
                    const now = new Date();
                    const diff = Math.floor((now - startTime) / 1000);
                    const minutes = Math.floor(diff / 60);
                    const seconds = diff % 60;
                    
                    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }

            // دالة لإنشاء اختبار عشوائي من محاضرات محددة
            function setupCustomTestFromSelectedLectures(questionCount, selectedLectures) {
                // جمع الأسئلة من المحاضرات المحددة فقط
                let allQuestions = [];
                selectedLectures.forEach(lecture => {
                    if (questionsData[lecture]) {
                        allQuestions = allQuestions.concat(questionsData[lecture]);
                    }
                });
                
                // إذا لم يتم اختيار أي محاضرة، نستخدم جميع المحاضرات
                if (allQuestions.length === 0) {
                    for (const lecture in questionsData) {
                        allQuestions = allQuestions.concat(questionsData[lecture]);
                    }
                }
                
                // اختيار عدد الأسئلة المطلوبة عشوائياً
                const shuffledQuestions = allQuestions.sort(() => 0.5 - Math.random());
                currentQuestions = shuffledQuestions.slice(0, questionCount);
                
                currentLecture = 'custom';
                currentQuestionIndex = 0;
                userAnswers = Array(currentQuestions.length).fill(null);
                score = 0;
                answered = false;
                
                // بدء المؤقت
                startTime = new Date();
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000);
                updateTimer();
                
                // تحديث واجهة المستخدم
                lectureTitle.textContent = `Custom Test (${questionCount} questions from ${selectedLectures.length} lectures)`;
                customTestContainer.style.display = 'none';
                examContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
                
                // إنشاء القائمة الجانبية
                createQuestionsSidebar();
                
                loadQuestion();
                updateProgress();
                updateNavigation();
                
                // حفظ الإعدادات
                saveSettings();
            }

            // دالة للحصول على المحاضرات المحددة
            function getSelectedLectures() {
                const selected = [];
                document.querySelectorAll('#lecture-checkboxes input:checked').forEach(checkbox => {
                    selected.push(checkbox.value);
                });
                return selected;
            }
            
            // Set up exam for selected lecture
            function setupExam(lecture) {
                isCustomTest = false;
                currentLecture = lecture;
                currentQuestions = questionsData[lecture] || [];
                currentQuestionIndex = 0;
                userAnswers = Array(currentQuestions.length).fill(null);
                score = 0;
                answered = false;
                
                // Start timer
                startTime = new Date();
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000);
                updateTimer();
                
                // Update UI
                lectureTitle.textContent = lecture === 'true-false' ? 'أسئلة صحيح/خطأ' : `المحاضرة ${lecture}`;
                lectureSelection.style.display = 'none';
                examContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
                
                // إنشاء القائمة الجانبية
                createQuestionsSidebar();
                
                loadQuestion();
                updateProgress();
                updateNavigation();
                
                // حفظ الإعدادات
                saveSettings();
            }
            
            // Load current question
            function loadQuestion() {
                if (currentQuestions.length === 0) return;
                
                const question = currentQuestions[currentQuestionIndex];
                
                questionText.textContent = question.question;
                currentNumber.textContent = currentQuestionIndex + 1;
                
                // Clear previous options
                optionsContainer.innerHTML = '';
                
                // Add new options
                question.options.forEach((option, index) => {
                    const label = document.createElement('label');
                    label.className = 'option';
                    
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = 'option';
                    input.value = String.fromCharCode(65 + index); // A, B, C, D
                    input.disabled = answered;
                    
                    const optionLabel = document.createElement('span');
                    optionLabel.className = 'option-label';
                    optionLabel.textContent = String.fromCharCode(65 + index) + '.';
                    
                    const optionText = document.createElement('span');
                    optionText.textContent = option;
                    
                    label.appendChild(input);
                    label.appendChild(optionLabel);
                    label.appendChild(optionText);
                    
                    // Check if this option has been selected
                    if (userAnswers[currentQuestionIndex] === input.value) {
                        input.checked = true;
                    }
                    
                    // Add click event to option
                    label.addEventListener('click', function() {
                        if (!answered) {
                            selectOption(input.value);
                        }
                    });
                    
                    optionsContainer.appendChild(label);
                });
                
                // Hide feedback
                feedback.style.display = 'none';
                answered = false;
            }
            
            // Create fireworks effect
            function createFireworks() {
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        const firework = document.createElement('div');
                        firework.className = 'firework';
                        firework.style.left = Math.random() * 100 + 'vw';
                        firework.style.top = Math.random() * 100 + 'vh';
                        firework.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                        document.body.appendChild(firework);
                        
                        setTimeout(() => {
                            firework.remove();
                        }, 1000);
                    }, i * 100);
                }
            }
            
            // Create confetti effect
            function createConfetti() {
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.background = `linear-gradient(45deg, 
                        hsl(${Math.random() * 360}, 100%, 50%), 
                        hsl(${Math.random() * 360}, 100%, 50%))`;
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }
            }
            
            // Select an option
            function selectOption(value) {
                answered = true;
                userAnswers[currentQuestionIndex] = value;
                
                // Disable all options after selection
                document.querySelectorAll('input[name="option"]').forEach(input => {
                    input.disabled = true;
                });
                
                // Check answer
                const question = currentQuestions[currentQuestionIndex];
                const isCorrect = value === question.answer;
                
                // Apply visual effects
                if (isCorrect) {
                    document.querySelector(`input[value="${value}"]`).parentElement.classList.add('correct-answer');
                    createFireworks();
                } else {
                    document.querySelector(`input[value="${value}"]`).parentElement.classList.add('incorrect-answer');
                    // Show correct answer
                    document.querySelector(`input[value="${question.answer}"]`).parentElement.classList.add('correct-answer');
                }
                
                // Show feedback if immediate feedback is enabled
                if (immediateFeedback) {
                    feedback.textContent = isCorrect ? 
                        "إجابة صحيحة! أحسنت! 🎉" : 
                        `إجابة خاطئة. الإجابة الصحيحة هي: ${question.answer}`;
                    
                    feedback.className = isCorrect ? 'feedback correct' : 'feedback incorrect';
                    feedback.style.display = 'block';
                }
                
                // Update score
                if (isCorrect) {
                    score++;
                }
                
                // Enable next button after selecting an answer
                nextBtn.disabled = false;
                
                // تحديث القائمة الجانبية
                updateQuestionsSidebar();
                
                // Save progress
                saveProgress();
            }
            
            // Update progress bar
            function updateProgress() {
                const progress = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `السؤال ${currentQuestionIndex + 1} من ${currentQuestions.length}`;
                progressPercentage.textContent = `${Math.round(progress)}%`;
            }
            
            // Update navigation buttons
            function updateNavigation() {
                prevBtn.disabled = currentQuestionIndex === 0;
                
                if (currentQuestionIndex === currentQuestions.length - 1) {
                    nextBtn.textContent = "إنهاء الاختبار";
                } else {
                    nextBtn.textContent = "التالي";
                }
                
                nextBtn.disabled = userAnswers[currentQuestionIndex] === null;
            }
            
            // Show results
            function showResults() {
                clearInterval(timerInterval);
                
                const endTime = new Date();
                const timeDiff = Math.floor((endTime - startTime) / 1000);
                const minutes = Math.floor(timeDiff / 60);
                const seconds = timeDiff % 60;
                const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                const percentage = (score / currentQuestions.length) * 100;
                
                scoreElement.textContent = `${score}/${currentQuestions.length}`;
                scoreTextElement.textContent = `لقد حصلت على ${percentage.toFixed(1)}% في هذا الاختبار`;
                correctAnswersElement.textContent = score;
                incorrectAnswersElement.textContent = currentQuestions.length - score;
                timeTakenElement.textContent = timeString;
                
                // Show achievement badge if score is good
                if (percentage >= 70) {
                    const badge = document.createElement('div');
                    badge.className = 'badge';
                    badge.textContent = 'نتيجة ممتازة! 🏆';
                    scoreTextElement.parentNode.insertBefore(badge, scoreTextElement.nextSibling);
                }
                
                // Check and unlock achievements
                checkAchievements(percentage, timeDiff, currentQuestions.length);
                
                // Show review panel
                displayReviewPanel();
                
                // Show leaderboard
                updateLeaderboard(percentage, timeString);
                
                // Show share results section
                shareResults.style.display = 'block';
                
                // Show QR code
                generateQRCode(percentage);
                
                resultsContainer.style.display = 'block';
                createConfetti();
                
                // Clear saved progress
                localStorage.removeItem('mlTestProgress');
            }
            
            // Check and unlock achievements
            function checkAchievements(percentage, timeTaken, questionCount) {
                // First test achievement
                unlockAchievement('first_test');
                
                // Speed demon achievement (under 5 minutes)
                if (timeTaken < 300) { // 5 minutes = 300 seconds
                    unlockAchievement('speed_demon');
                }
                
                // High accuracy achievement (90% or more)
                if (percentage >= 90) {
                    unlockAchievement('high_accuracy');
                }
                
                // Perfect score achievement
                if (percentage === 100) {
                    unlockAchievement('perfect_score');
                }
                
                // Marathon achievement (100 questions)
                if (questionCount >= 100) {
                    unlockAchievement('marathon');
                }
            }
            
            // Display review panel
            function displayReviewPanel() {
                reviewQuestions.innerHTML = '';
                
                currentQuestions.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    const isCorrect = userAnswer === question.answer;
                    
                    const reviewQuestion = document.createElement('div');
                    reviewQuestion.className = `review-question ${isCorrect ? 'correct' : 'incorrect'}`;
                    
                    const questionText = document.createElement('div');
                    questionText.className = 'review-question-text';
                    questionText.textContent = `السؤال ${index + 1}: ${question.question}`;
                    
                    const userAnswerDiv = document.createElement('div');
                    userAnswerDiv.className = 'review-answer';
                    userAnswerDiv.innerHTML = `
                        <span class="answer-label">إجابتك:</span>
                        <span class="answer-user">${userAnswer ? question.options[userAnswer.charCodeAt(0) - 65] : 'لم تجب'}</span>
                    `;
                    
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'review-answer';
                    correctAnswerDiv.innerHTML = `
                        <span class="answer-label">الإجابة الصحيحة:</span>
                        <span class="answer-correct">${question.options[question.answer.charCodeAt(0) - 65]}</span>
                    `;
                    
                    reviewQuestion.appendChild(questionText);
                    if (!isCorrect) {
                        reviewQuestion.appendChild(userAnswerDiv);
                    }
                    reviewQuestion.appendChild(correctAnswerDiv);
                    
                    reviewQuestions.appendChild(reviewQuestion);
                });
                
                reviewPanel.style.display = 'block';
            }
            
            // Update leaderboard
            function updateLeaderboard(percentage, timeTaken) {
                // Add current result to leaderboard
                const result = {
                    score: percentage,
                    time: timeTaken,
                    date: new Date().toLocaleDateString('ar-SA'),
                    questions: currentQuestions.length
                };
                
                leaderboardData.push(result);
                
                // Sort by score (descending)
                leaderboardData.sort((a, b) => b.score - a.score);
                
                // Keep only top 10
                leaderboardData = leaderboardData.slice(0, 10);
                
                // Save to localStorage
                localStorage.setItem('mlTestLeaderboard', JSON.stringify(leaderboardData));
                
                // Display leaderboard
                displayLeaderboard();
            }
            
            // Load leaderboard from localStorage
            function loadLeaderboard() {
                const savedLeaderboard = localStorage.getItem('mlTestLeaderboard');
                if (savedLeaderboard) {
                    leaderboardData = JSON.parse(savedLeaderboard);
                }
            }
            
            // Display leaderboard
            function displayLeaderboard() {
                leaderboardList.innerHTML = '';
                
                leaderboardData.forEach((result, index) => {
                    const leaderboardItem = document.createElement('li');
                    leaderboardItem.className = 'leaderboard-item';
                    
                    leaderboardItem.innerHTML = `
                        <span class="leaderboard-rank">${index + 1}</span>
                        <span>${result.score.toFixed(1)}%</span>
                        <span>${result.time}</span>
                        <span>${result.date}</span>
                    `;
                    
                    leaderboardList.appendChild(leaderboardItem);
                });
                
                leaderboard.style.display = 'block';
            }
            
            // Generate QR code
            function generateQRCode(percentage) {
                // In a real implementation, you would use a QR code library
                // For now, we'll create a simple placeholder
                qrCodeElement.innerHTML = `
                    <div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;">
                        <div style="font-size:3rem;">📊</div>
                        <div style="font-weight:bold;margin-top:10px;">${percentage.toFixed(1)}%</div>
                    </div>
                `;
                
                qrCodeContainer.style.display = 'block';
            }
            
            // Display achievements
            function displayAchievements() {
                achievementsGrid.innerHTML = '';
                achievements.forEach(achievement => {
                    const achievementEl = document.createElement('div');
                    achievementEl.className = `achievement ${achievement.unlocked ? 'unlocked' : ''}`;
                    achievementEl.innerHTML = `
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    `;
                    achievementsGrid.appendChild(achievementEl);
                });
            }
            
            // أحداث الأزرار
            darkModeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('darkMode', 'enabled');
                    darkModeToggle.textContent = 'الوضع النهاري';
                } else {
                    localStorage.setItem('darkMode', 'disabled');
                    darkModeToggle.textContent = 'الوضع الليلي';
                }
            });
            
            resetProgressBtn.addEventListener('click', function() {
                if (confirm('هل أنت متأكد من أنك تريد حذف كل التقدم والإنجازات؟')) {
                    localStorage.removeItem('mlTestProgress');
                    localStorage.removeItem('mlTestAchievements');
                    localStorage.removeItem('mlTestLeaderboard');
                    location.reload();
                }
            });
            
            showAchievementsBtn.addEventListener('click', function() {
                displayAchievements();
                achievementsPanel.style.display = 'block';
            });
            
            // حدث إظهار/إخفاء القائمة الجانبية
            toggleSidebarBtn.addEventListener('click', toggleSidebar);
            
            // الانتقال إلى قسم المحاضرات
            startLecturesBtn.addEventListener('click', function() {
                welcomeScreen.style.display = 'none';
                lectureSelection.style.display = 'grid';
            });
            
            // الانتقال إلى قسم صنع الاختبار
            createTestBtn.addEventListener('click', function() {
                welcomeScreen.style.display = 'none';
                customTestContainer.style.display = 'block';
            });
            
            // العودة إلى الصفحة الرئيسية
            backToWelcomeBtn.addEventListener('click', function() {
                customTestContainer.style.display = 'none';
                welcomeScreen.style.display = 'flex';
            });
            
            backToWelcomeBtn2.addEventListener('click', function() {
                lectureSelection.style.display = 'none';
                welcomeScreen.style.display = 'flex';
            });

            // حدث زر About Us
            aboutUsBtn.addEventListener('click', function() {
                welcomeScreen.style.display = 'none';
                lectureSelection.style.display = 'none';
                customTestContainer.style.display = 'none';
                examContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                aboutUsContainer.style.display = 'flex';
            });

            // حدث العودة من About Us
            backFromAboutBtn.addEventListener('click', function() {
                aboutUsContainer.style.display = 'none';
                welcomeScreen.style.display = 'flex';
            });

            // حدث اختيار الكل
            selectAllBtn.addEventListener('click', function() {
                document.querySelectorAll('#lecture-checkboxes input').forEach(checkbox => {
                    checkbox.checked = true;
                });
            });

            // حدث إلغاء اختيار الكل
            deselectAllBtn.addEventListener('click', function() {
                document.querySelectorAll('#lecture-checkboxes input').forEach(checkbox => {
                    checkbox.checked = false;
                });
            });
            
            // تعديل حدث بدء الاختبار العشوائي
            startCustomTestBtn.addEventListener('click', function() {
                const questionCount = parseInt(questionCountInput.value);
                if (questionCount < 5 || questionCount > 100) {
                    alert('Please select between 5 and 100 questions');
                    return;
                }
                
                const selectedLectures = getSelectedLectures();
                if (selectedLectures.length === 0) {
                    alert('Please select at least one lecture');
                    return;
                }
                
                isCustomTest = true;
                setupCustomTestFromSelectedLectures(questionCount, selectedLectures);
            });
            
            // Click events for lecture buttons
            document.querySelectorAll('.lecture-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const lecture = this.dataset.lecture;
                    setupExam(lecture);
                });
            });
            
            // Navigation button events
            prevBtn.addEventListener('click', function() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion();
                    updateProgress();
                    updateNavigation();
                    updateQuestionsSidebar();
                }
            });
            
            nextBtn.addEventListener('click', function() {
                if (currentQuestionIndex < currentQuestions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                    updateProgress();
                    updateNavigation();
                    updateQuestionsSidebar();
                } else {
                    showResults();
                }
            });
            
            // Return to lectures button
            returnBtn.addEventListener('click', function() {
                clearInterval(timerInterval);
                
                if (isCustomTest) {
                    examContainer.style.display = 'none';
                    customTestContainer.style.display = 'block';
                } else {
                    examContainer.style.display = 'none';
                    lectureSelection.style.display = 'grid';
                }
            });
            
            // Retry incorrect questions
            retryIncorrectBtn.addEventListener('click', function() {
                const incorrectQuestions = currentQuestions.filter((question, index) => {
                    return userAnswers[index] !== question.answer;
                });
                
                if (incorrectQuestions.length === 0) {
                    alert('لا توجد أسئلة خاطئة لإعادة المحاولة!');
                    return;
                }
                
                currentQuestions = incorrectQuestions;
                currentQuestionIndex = 0;
                userAnswers = Array(currentQuestions.length).fill(null);
                score = 0;
                answered = false;
                
                // Start timer
                startTime = new Date();
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000);
                updateTimer();
                
                // Update UI
                resultsContainer.style.display = 'none';
                examContainer.style.display = 'block';
                
                // إنشاء القائمة الجانبية
                createQuestionsSidebar();
                
                loadQuestion();
                updateProgress();
                updateNavigation();
            });
            
            // Copy results to clipboard
            copyResultsBtn.addEventListener('click', function() {
                const percentage = (score / currentQuestions.length) * 100;
                const resultText = `نتيجة اختبار التعلم الآلي: ${score}/${currentQuestions.length} (${percentage.toFixed(1)}%) - الوقت المستغرق: ${timeTakenElement.textContent}`;
                
                navigator.clipboard.writeText(resultText).then(function() {
                    alert('تم نسخ النتائج إلى الحافظة!');
                }, function(err) {
                    console.error('Failed to copy: ', err);
                });
            });
            
            // Share on Twitter
            shareTwitterBtn.addEventListener('click', function() {
                const percentage = (score / currentQuestions.length) * 100;
                const text = `نتيجة اختبار التعلم الآلي: ${score}/${currentQuestions.length} (${percentage.toFixed(1)}%)`;
                const url = window.location.href;
                const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                window.open(twitterUrl, '_blank');
            });
            
            // Share on WhatsApp
            shareWhatsappBtn.addEventListener('click', function() {
                const percentage = (score / currentQuestions.length) * 100;
                const text = `نتيجة اختبار التعلم الآلي: ${score}/${currentQuestions.length} (${percentage.toFixed(1)}%) - ${window.location.href}`;
                const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`;
                window.open(whatsappUrl, '_blank');
            });
            
            // Export to PDF
            exportPdfBtn.addEventListener('click', function() {
                // In a real implementation, you would use a PDF library like jsPDF
                alert('سيتم تصدير النتيجة كملف PDF في التطبيق الكامل');
            });
            
            // Back to lectures from results
            backToLecturesBtn.addEventListener('click', function() {
                resultsContainer.style.display = 'none';
                lectureSelection.style.display = 'grid';
            });

            
            
            // Initialize the application
            init();
        });
    </script>
</body>
</html>